/* sigma.js - A JavaScript library dedicated to graph drawing. - Version: 1.2.1 - Author: Alexis Jacomy, Sciences-Po MÃ©dialab - License: MIT */

!function(l){"use strict";function d(e){var t,i,s,r;d.classes.dispatcher.extend(this);var o=this,a=e||{};if("string"==typeof a||a instanceof HTMLElement?a={renderers:[a]}:"[object Array]"===Object.prototype.toString.call(a)&&(a={renderers:a}),e=a.renderers||a.renderer||a.container,a.renderers&&0!==a.renderers.length||("string"==typeof e||e instanceof HTMLElement||"object"==typeof e&&"container"in e)&&(a.renderers=[e]),a.id){if(n[a.id])throw'sigma: Instance "'+a.id+'" already exists.';Object.defineProperty(this,"id",{value:a.id})}else{for(r=0;n[r];)r++;Object.defineProperty(this,"id",{value:""+r})}for((n[this.id]=this).settings=new d.classes.configurable(d.settings,a.settings||{}),Object.defineProperty(this,"graph",{value:new d.classes.graph(this.settings),configurable:!0}),Object.defineProperty(this,"middlewares",{value:[],configurable:!0}),Object.defineProperty(this,"cameras",{value:{},configurable:!0}),Object.defineProperty(this,"renderers",{value:{},configurable:!0}),Object.defineProperty(this,"renderersPerCamera",{value:{},configurable:!0}),Object.defineProperty(this,"cameraFrames",{value:{},configurable:!0}),Object.defineProperty(this,"camera",{get:function(){return this.cameras[0]}}),Object.defineProperty(this,"events",{value:["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","doubleClickNode","doubleClickNodes","rightClickNode","rightClickNodes","overNode","overNodes","outNode","outNodes","downNode","downNodes","upNode","upNodes"],configurable:!0}),this._handler=function(e){var t,i={};for(t in e.data)i[t]=e.data[t];i.renderer=e.target,this.dispatchEvent(e.type,i)}.bind(this),t=0,i=(s=a.renderers||[]).length;t<i;t++)this.addRenderer(s[t]);for(t=0,i=(s=a.middlewares||[]).length;t<i;t++)this.middlewares.push("string"==typeof s[t]?d.middlewares[s[t]]:s[t]);"object"==typeof a.graph&&a.graph&&(this.graph.read(a.graph),this.refresh()),window.addEventListener("resize",function(){o.settings&&o.refresh()})}var n={};if(d.prototype.addCamera=function(e){var t,i=this;if(!arguments.length){for(e=0;this.cameras[""+e];)e++;e=""+e}if(this.cameras[e])throw'sigma.addCamera: The camera "'+e+'" already exists.';return t=new d.classes.camera(e,this.graph,this.settings),(this.cameras[e]=t).quadtree=new d.classes.quad,d.classes.edgequad!==l&&(t.edgequadtree=new d.classes.edgequad),t.bind("coordinatesUpdated",function(e){i.renderCamera(t,t.isAnimated)}),this.renderersPerCamera[e]=[],t},d.prototype.killCamera=function(e){if(!(e="string"==typeof e?this.cameras[e]:e))throw"sigma.killCamera: The camera is undefined.";for(var t=this.renderersPerCamera[e.id],i=t.length-1;0<=i;i--)this.killRenderer(t[i]);return delete this.renderersPerCamera[e.id],delete this.cameraFrames[e.id],delete this.cameras[e.id],e.kill&&e.kill(),this},d.prototype.addRenderer=function(e){var t,i,s=e||{};if("string"==typeof s?s={container:document.getElementById(s)}:s instanceof HTMLElement&&(s={container:s}),"string"==typeof s.container&&(s.container=document.getElementById(s.container)),"id"in s)t=s.id;else{for(t=0;this.renderers[""+t];)t++;t=""+t}if(this.renderers[t])throw'sigma.addRenderer: The renderer "'+t+'" already exists.';if(i=(i="function"==typeof s.type?s.type:d.renderers[s.type])||d.renderers.def,e="camera"in s?s.camera instanceof d.classes.camera?s.camera:this.cameras[s.camera]||this.addCamera(s.camera):this.addCamera(),this.cameras[e.id]!==e)throw"sigma.addRenderer: The camera is not properly referenced.";return s=new i(this.graph,e,this.settings,s),this.renderers[t]=s,Object.defineProperty(s,"id",{value:t}),s.bind&&s.bind(["click","rightClick","clickStage","doubleClickStage","rightClickStage","clickNode","clickNodes","clickEdge","clickEdges","doubleClickNode","doubleClickNodes","doubleClickEdge","doubleClickEdges","rightClickNode","rightClickNodes","rightClickEdge","rightClickEdges","overNode","overNodes","overEdge","overEdges","outNode","outNodes","outEdge","outEdges","downNode","downNodes","downEdge","downEdges","upNode","upNodes","upEdge","upEdges"],this._handler),this.renderersPerCamera[e.id].push(s),s},d.prototype.killRenderer=function(e){if(!(e="string"==typeof e?this.renderers[e]:e))throw"sigma.killRenderer: The renderer is undefined.";var t=this.renderersPerCamera[e.camera.id],i=t.indexOf(e);return 0<=i&&t.splice(i,1),e.kill&&e.kill(),delete this.renderers[e.id],this},d.prototype.refresh=function(e){var t,i,s,r,o,a,n=0;for(e=e||{},t=0,i=(r=this.middlewares||[]).length;t<i;t++)r[t].call(this,0===t?"":"tmp"+n+":",t===i-1?"ready:":"tmp"+ ++n+":");for(s in this.cameras)(o=this.cameras[s]).settings("autoRescale")&&this.renderersPerCamera[o.id]&&this.renderersPerCamera[o.id].length?d.middlewares.rescale.call(this,r.length?"ready:":"",o.readPrefix,{width:this.renderersPerCamera[o.id][0].width,height:this.renderersPerCamera[o.id][0].height}):d.middlewares.copy.call(this,r.length?"ready:":"",o.readPrefix),e.skipIndexation||(a=d.utils.getBoundaries(this.graph,o.readPrefix),o.quadtree.index(this.graph.nodes(),{prefix:o.readPrefix,bounds:{x:a.minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}),o.edgequadtree!==l&&o.settings("drawEdges")&&o.settings("enableEdgeHovering")&&o.edgequadtree.index(this.graph,{prefix:o.readPrefix,bounds:{x:a.minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}));for(t=0,i=(r=Object.keys(this.renderers)).length;t<i;t++)if(this.renderers[r[t]].process)if(this.settings("skipErrors"))try{this.renderers[r[t]].process()}catch(e){console.log('Warning: The renderer "'+r[t]+'" crashed on ".process()"')}else this.renderers[r[t]].process();return this.render(),this},d.prototype.render=function(){for(var t=Object.keys(this.renderers),i=0,e=t.length;i<e;i++)if(this.settings("skipErrors"))try{this.renderers[t[i]].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+t[i]+'" crashed on ".render()"')}else this.renderers[t[i]].render();return this},d.prototype.renderCamera=function(e,t){var i,s,r,o=this;if(t)for(i=0,s=(r=this.renderersPerCamera[e.id]).length;i<s;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();else if(!this.cameraFrames[e.id]){for(i=0,s=(r=this.renderersPerCamera[e.id]).length;i<s;i++)if(this.settings("skipErrors"))try{r[i].render()}catch(e){this.settings("verbose")&&console.log('Warning: The renderer "'+r[i].id+'" crashed on ".render()"')}else r[i].render();this.cameraFrames[e.id]=requestAnimationFrame(function(){delete o.cameraFrames[e.id]})}return this},d.prototype.kill=function(){for(var e in this.dispatchEvent("kill"),this.graph.kill(),delete this.middlewares,this.renderers)this.killRenderer(this.renderers[e]);for(e in this.cameras)this.killCamera(this.cameras[e]);for(e in delete this.renderers,delete this.cameras,this)this.hasOwnProperty(e)&&delete this[e];delete n[this.id]},d.instances=function(e){return arguments.length?n[e]:d.utils.extend({},n)},d.version="1.2.1",void 0!==this.sigma)throw"An object called sigma is already in the global scope.";this.sigma=d}.call(this),function(e){"use strict";if(e.conrad)throw new Error("conrad already exists");var a,n=!1,d={},h={},l=[],g={},c=[],u=!1,m={frameDuration:20,history:!0},f=Object.create(null);function p(e,t){var i,s,r,o,a,n,l=Array.isArray(e)?e:e.split(/ /);for(t=void 0===t?{}:t,i=0,r=l.length;i!==r;i+=1)if(n=l[i],f[n])for(a={type:n,data:t||{}},s=0,o=f[n].length;s!==o;s+=1)try{f[n][s].handler(a)}catch(e){}}function s(e){var t=l.length;(h[e.id]=e).status="running",t&&(e.weightTime=l[t-1].weightTime,e.currentTime=e.weightTime*(e.weight||1)),e.startTime=A(),p("jobStarted",E(e)),l.push(e)}function y(){var e,t,i;for(e in d)(t=d[e]).after?g[e]=t:s(t),delete d[e];for(n=!!l.length;l.length&&A()-a<m.frameDuration;)if(i=function(){var e,t,i=!1,s=A(),r=l.shift(),o=r.job(),s=A()-s;if(r.done++,r.time+=s,r.currentTime+=s,r.weightTime=r.currentTime/(r.weight||1),r.averageTime=r.time/r.done,!(o=r.count?r.count<=r.done:!o)){for(e=0,t=l.length;e<t;e++)if(l[e].weightTime>r.weightTime){l.splice(e,0,r),i=!0;break}i||l.push(r)}return o?r:null}())for(e in x(i.id),g)g[e].after===i.id&&(s(g[e]),delete g[e]);n?(a=A(),p("enterFrame"),setTimeout(y,0)):p("stop")}function x(e){var t,i,s,r,o=!1;if(Array.isArray(e))for(t=0,i=e.length;t<i;t++)x(e[t]);else{if("string"!=typeof e)throw new Error("[conrad.killJob] Wrong arguments.");for(t=0,i=(s=[h,g,d]).length;t<i;t++)e in s[t]&&(r=s[t][e],m.history&&(r.status="done",c.push(r)),p("jobEnded",E(r)),delete s[t][e],"function"==typeof r.end&&r.end(),o=!0);for(t=0,i=(s=l).length;t<i;t++)if(s[t].id===e){s.splice(t,1);break}if(!o)throw new Error('[conrad.killJob] Job "'+e+'" not found.')}return this}function b(e){e=d[e]||h[e]||g[e];return e?v(e):null}function v(){for(var e,t={},i=arguments.length-1;0<=i;i--)for(e in arguments[i])t[e]=arguments[i][e];return t}function E(e){var t,i,s;if(!e)return e;if(Array.isArray(e))for(t=[],i=0,s=e.length;i<s;i++)t.push(E(e[i]));else if("object"==typeof e)for(i in t={},e)t[i]=E(e[i]);else t=e;return t}function w(e){var t,i=[];for(t in e)i.push(e[t]);return i}function A(){return Date.now?Date.now():(new Date).getTime()}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var t={hasJob:b,addJob:function e(t,i){var s,r,o;if(Array.isArray(t)){for(u=!0,s=0,r=t.length;s<r;s++)e(t[s].id,v(t[s],i));u=!1,n||(a=A(),p("start"),y())}else if("object"==typeof t)if("string"==typeof t.id)e(t.id,t);else{for(s in u=!0,t)"function"==typeof t[s]?e(s,v({job:t[s]},i)):e(s,v(t[s],i));u=!1,n||(a=A(),p("start"),y())}else{if("string"!=typeof t)throw new Error("[conrad.addJob] Wrong arguments.");if(b(t))throw new Error('[conrad.addJob] Job with id "'+t+'" already exists.');if("function"==typeof i)o={id:t,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0,job:i};else{if("object"!=typeof i)throw new Error("[conrad.addJob] Wrong arguments.");o=v({id:t,done:0,time:0,status:"waiting",currentTime:0,averageTime:0,weightTime:0},i)}p("jobAdded",E(d[t]=o)),n||u||(a=A(),p("start"),y())}return this},killJob:x,killAll:function(){var e,t=v(d,h,g);if(m.history)for(e in t)t[e].status="done",c.push(t[e]),"function"==typeof t[e].end&&t[e].end();return d={},g={},h={},n=!(l=[]),this},settings:function(e,t){var i,s;if("string"==typeof a1&&1===arguments.length)return m[a1];for(s in i="object"==typeof a1&&1===arguments.length&&a1||{},"string"==typeof a1&&(i[a1]=a2),i)void 0!==i[s]?m[s]=i[s]:delete m[s];return this},getStats:function(e,t){var i,s,r,o,a,n,l;if(!arguments.length){for(s in a=[],d)a.push(d[s]);for(s in g)a.push(g[s]);for(s in h)a.push(h[s]);a=a.concat(c)}if("string"==typeof e)switch(e){case"waiting":a=w(g);break;case"running":a=w(h);break;case"done":a=c;break;default:n=e}if(n=!(n=e instanceof RegExp?e:n)&&("string"==typeof t||t instanceof RegExp)?t:n){if(l="string"==typeof n,a instanceof Array)i=a;else if("object"==typeof a)for(s in i=[],a)i=i.concat(a[s]);else{for(s in i=[],d)i.push(d[s]);for(s in g)i.push(g[s]);for(s in h)i.push(h[s]);i=i.concat(c)}for(a=[],r=0,o=i.length;r<o;r++)(l?i[r].id===n:i[r].id.match(n))&&a.push(i[r])}return E(a)},isRunning:function(){return n},clearHistory:function(){return c=[],this},bind:function e(t,i){var s,r,o,a;if(arguments.length)if(1===arguments.length&&Object(arguments[0])===arguments[0])for(t in arguments[0])e(t,arguments[0][t]);else if(1<arguments.length)for(s=0,r=(a=Array.isArray(t)?t:t.split(/ /)).length;s!==r;s+=1)o=a[s],f[o]||(f[o]=[]),f[o].push({handler:i})},unbind:function(e,t){var i,s,r,o,a,n,l=Array.isArray(e)?e:e.split(/ /);if(arguments.length)if(t)for(i=0,s=l.length;i!==s;i+=1){if(n=l[i],f[n]){for(a=[],r=0,o=f[n].length;r!==o;r+=1)f[n][r].handler!==t&&a.push(f[n][r]);f[n]=a}f[n]&&0===f[n].length&&delete f[n]}else for(i=0,s=l.length;i!==s;i+=1)delete f[l[i]];else f=Object.create(null)},version:"0.1.0"};"undefined"!=typeof exports&&((exports="undefined"!=typeof module&&module.exports?module.exports=t:exports).conrad=t),e.conrad=t}(this),function(t){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";var e,i=this;sigma.utils=sigma.utils||{},sigma.utils.extend=function(){for(var e,t={},i=arguments.length-1;0<=i;i--)for(e in arguments[i])t[e]=arguments[i][e];return t},sigma.utils.dateNow=function(){return Date.now?Date.now():(new Date).getTime()},sigma.utils.pkg=function(e){return(e||"").split(".").reduce(function(e,t){return t in e?e[t]:e[t]={}},i)},sigma.utils.id=(e=0,function(){return++e});var o={};sigma.utils.floatColor=function(e){if(o[e])return o[e];var t=e,i=0,s=0,r=0;"#"===e[0]?r=3===(e=e.slice(1)).length?(i=parseInt(e.charAt(0)+e.charAt(0),16),s=parseInt(e.charAt(1)+e.charAt(1),16),parseInt(e.charAt(2)+e.charAt(2),16)):(i=parseInt(e.charAt(0)+e.charAt(1),16),s=parseInt(e.charAt(2)+e.charAt(3),16),parseInt(e.charAt(4)+e.charAt(5),16)):e.match(/^ *rgba? *\(/)&&(i=+(e=e.match(/^ *rgba? *\( *([0-9]*) *, *([0-9]*) *, *([0-9]*) *(,.*)?\) *$/))[1],s=+e[2],r=+e[3]);r=256*i*256+256*s+r;return o[t]=r},sigma.utils.zoomTo=function(e,t,i,s,r){var o=e.settings,o=Math.max(o("zoomMin"),Math.min(o("zoomMax"),e.ratio*s));o!==e.ratio&&(s={x:t*(1-(s=o/e.ratio))+e.x,y:i*(1-s)+e.y,ratio:o},r&&r.duration?(o=sigma.misc.animation.killAll(e),r=sigma.utils.extend(r,{easing:o?"quadraticOut":"quadraticInOut"}),sigma.misc.animation.camera(e,s,r)):(e.goTo(s),r&&r.onComplete&&r.onComplete()))},sigma.utils.getQuadraticControlPoint=function(e,t,i,s){return{x:(e+i)/2+(s-t)/4,y:(t+s)/2+(e-i)/4}},sigma.utils.getPointOnQuadraticCurve=function(e,t,i,s,r,o,a){return{x:Math.pow(1-e,2)*t+2*(1-e)*e*o+Math.pow(e,2)*s,y:Math.pow(1-e,2)*i+2*(1-e)*e*a+Math.pow(e,2)*r}},sigma.utils.getPointOnBezierCurve=function(e,t,i,s,r,o,a,n,l){var d=Math.pow(1-e,3),h=3*e*Math.pow(1-e,2),g=3*Math.pow(e,2)*(1-e),e=Math.pow(e,3);return{x:d*t+h*o+g*n+e*s,y:d*i+h*a+g*l+e*r}},sigma.utils.getSelfLoopControlPoints=function(e,t,i){return{x1:e-7*i,y1:t,x2:e,y2:t+7*i}},sigma.utils.getDistance=function(e,t,i,s){return Math.sqrt(Math.pow(i-e,2)+Math.pow(s-t,2))},sigma.utils.getCircleIntersection=function(e,t,i,s,r,o){var a=s-e,s=r-t,r=Math.sqrt(s*s+a*a);if(i+o<r)return!1;if(r<Math.abs(i-o))return!1;o=t+s*(t=(i*i-o*o+r*r)/(2*r))/r;return{xi:(e=e+a*t/r)+(s=(t=Math.sqrt(i*i-t*t))/r*-s),xi_prime:e-s,yi:o+(a=t/r*a),yi_prime:o-a}},sigma.utils.isPointOnSegment=function(e,t,i,s,r,o,a){return Math.abs((t-s)*(r-i)-(e-i)*(o-s))/sigma.utils.getDistance(i,s,r,o)<a&&Math.min(i,r)<=e&&e<=Math.max(i,r)&&Math.min(s,o)<=t&&t<=Math.max(s,o)},sigma.utils.isPointOnQuadraticCurve=function(e,t,i,s,r,o,a,n,l){var d=sigma.utils.getDistance(i,s,r,o);if(Math.abs(e-i)>d||Math.abs(t-s)>d)return!1;for(var h,g=.5,c=sigma.utils.getDistance(e,t,i,s)<sigma.utils.getDistance(e,t,r,o)?-.01:.01,u=100,m=sigma.utils.getPointOnQuadraticCurve(g,i,s,r,o,a,n),f=sigma.utils.getDistance(e,t,m.x,m.y);0<u--&&0<=g&&g<=1&&l<f&&(.001<c||c<-.001);)h=f,m=sigma.utils.getPointOnQuadraticCurve(g,i,s,r,o,a,n),h<(f=sigma.utils.getDistance(e,t,m.x,m.y))?g+=c=-c/2:g+c<0||1<g+c?(c/=2,f=h):g+=c;return f<l},sigma.utils.isPointOnBezierCurve=function(e,t,i,s,r,o,a,n,l,d,h){var g=sigma.utils.getDistance(i,s,a,n);if(Math.abs(e-i)>g||Math.abs(t-s)>g)return!1;for(var c,u=.5,m=sigma.utils.getDistance(e,t,i,s)<sigma.utils.getDistance(e,t,r,o)?-.01:.01,f=100,p=sigma.utils.getPointOnBezierCurve(u,i,s,r,o,a,n,l,d),y=sigma.utils.getDistance(e,t,p.x,p.y);0<f--&&0<=u&&u<=1&&h<y&&(.001<m||m<-.001);)c=y,p=sigma.utils.getPointOnBezierCurve(u,i,s,r,o,a,n,l,d),c<(y=sigma.utils.getDistance(e,t,p.x,p.y))?u+=m=-m/2:u+m<0||1<u+m?(m/=2,y=c):u+=m;return y<h},sigma.utils.getX=function(e){return e.offsetX!==t&&e.offsetX||e.layerX!==t&&e.layerX||e.clientX!==t&&e.clientX},sigma.utils.getY=function(e){return e.offsetY!==t&&e.offsetY||e.layerY!==t&&e.layerY||e.clientY!==t&&e.clientY},sigma.utils.getPixelRatio=function(){var e=1;return window.screen.deviceXDPI!==t&&window.screen.logicalXDPI!==t&&window.screen.deviceXDPI>window.screen.logicalXDPI?e=window.screen.systemXDPI/window.screen.logicalXDPI:window.devicePixelRatio!==t&&(e=window.devicePixelRatio),e},sigma.utils.getWidth=function(e){e=(e.target.ownerSVGElement||e.target).width;return"number"==typeof e&&e||e!==t&&e.baseVal!==t&&e.baseVal.value},sigma.utils.getCenter=function(e){var t=-1!==e.target.namespaceURI.indexOf("svg")?1:sigma.utils.getPixelRatio();return{x:sigma.utils.getWidth(e)/(2*t),y:sigma.utils.getHeight(e)/(2*t)}},sigma.utils.mouseCoords=function(e,t,i){return t=t||sigma.utils.getX(e),i=i||sigma.utils.getY(e),{x:t-sigma.utils.getCenter(e).x,y:i-sigma.utils.getCenter(e).y,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,shiftKey:e.shiftKey}},sigma.utils.getHeight=function(e){e=(e.target.ownerSVGElement||e.target).height;return"number"==typeof e&&e||e!==t&&e.baseVal!==t&&e.baseVal.value},sigma.utils.getDelta=function(e){return e.wheelDelta!==t&&e.wheelDelta||e.detail!==t&&-e.detail},sigma.utils.getOffset=function(e){for(var t=0,i=0;e;)i+=parseInt(e.offsetTop),t+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:i,left:t}},sigma.utils.doubleClick=function(e,t,i){var s,r=0;e._doubleClickHandler=e._doubleClickHandler||{},e._doubleClickHandler[t]=e._doubleClickHandler[t]||[],(s=e._doubleClickHandler[t]).push(function(e){return 2===++r?(r=0,i(e)):void(1===r&&setTimeout(function(){r=0},sigma.settings.doubleClickTimeout))}),e.addEventListener(t,s[s.length-1],!1)},sigma.utils.unbindDoubleClick=function(e,t){for(var i,s=(e._doubleClickHandler||{})[t]||[];i=s.pop();)e.removeEventListener(t,i);delete(e._doubleClickHandler||{})[t]},sigma.utils.easings=sigma.utils.easings||{},sigma.utils.easings.linearNone=function(e){return e},sigma.utils.easings.quadraticIn=function(e){return e*e},sigma.utils.easings.quadraticOut=function(e){return e*(2-e)},sigma.utils.easings.quadraticInOut=function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},sigma.utils.easings.cubicIn=function(e){return e*e*e},sigma.utils.easings.cubicOut=function(e){return--e*e*e+1},sigma.utils.easings.cubicInOut=function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},sigma.utils.loadShader=function(e,t,i,s){i=e.createShader(i);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(s&&s('Error compiling shader "'+i+'":'+e.getShaderInfoLog(i)),e.deleteShader(i),null)},sigma.utils.loadProgram=function(e,t,i,s,r){for(var o=e.createProgram(),a=0;a<t.length;++a)e.attachShader(o,t[a]);if(i)for(a=0;a<i.length;++a)e.bindAttribLocation(o,locations?locations[a]:a,opt_attribs[a]);return e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(r&&r("Error in program linking: "+e.getProgramInfoLog(o)),e.deleteProgram(o),null)},sigma.utils.pkg("sigma.utils.matrices"),sigma.utils.matrices.translation=function(e,t){return[1,0,0,0,1,0,e,t,1]},sigma.utils.matrices.rotation=function(e,t){var i=Math.cos(e),e=Math.sin(e);return t?[i,-e,e,i]:[i,-e,0,e,i,0,0,0,1]},sigma.utils.matrices.scale=function(e,t){return t?[e,0,0,e]:[e,0,0,0,e,0,0,0,1]},sigma.utils.matrices.multiply=function(e,t,i){var s=i?2:3,r=e[0*s+0],o=e[0*s+1],a=e[0*s+2],n=e[0+s],l=e[1+s],d=e[2+s],h=e[2*s+0],g=e[2*s+1],c=e[2*s+2],u=t[0*s+0],m=t[0*s+1],f=t[0*s+2],p=t[0+s],y=t[1+s],x=t[2+s],b=t[2*s+0],e=t[2*s+1],s=t[2*s+2];return i?[r*u+o*p,r*m+o*y,n*u+l*p,n*m+l*y]:[r*u+o*p+a*b,r*m+o*y+a*e,r*f+o*x+a*s,n*u+l*p+d*b,n*m+l*y+d*e,n*f+l*x+d*s,h*u+g*p+c*b,h*m+g*y+c*e,h*f+g*x+c*s]}}.call(this),function(o){"use strict";for(var a=0,e=["ms","moz","webkit","o"],t=0;t<e.length&&!o.requestAnimationFrame;t++)o.requestAnimationFrame=o[e[t]+"RequestAnimationFrame"],o.cancelAnimationFrame=o[e[t]+"CancelAnimationFrame"]||o[e[t]+"CancelRequestAnimationFrame"];o.requestAnimationFrame||(o.requestAnimationFrame=function(e,t){var i=(new Date).getTime(),s=Math.max(0,16-(i-a)),r=o.setTimeout(function(){e(i+s)},s);return a=i+s,r}),o.cancelAnimationFrame||(o.cancelAnimationFrame=function(e){clearTimeout(e)}),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),i=this,s=function(){},r=function(){return i.apply(this instanceof s&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,r.prototype=new s,r})}(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.settings");sigma.settings=sigma.utils.extend(sigma.settings||{},{clone:!0,immutable:!0,verbose:!1,classPrefix:"sigma",defaultNodeType:"def",defaultEdgeType:"def",defaultLabelColor:"#000",defaultEdgeColor:"#000",defaultNodeColor:"#000",defaultLabelSize:14,edgeColor:"source",minArrowSize:0,font:"arial",fontStyle:"",labelColor:"default",labelSize:"fixed",labelSizeRatio:1,labelThreshold:8,webglOversamplingRatio:2,borderSize:0,defaultNodeBorderColor:"#000",hoverFont:"",singleHover:!0,hoverFontStyle:"",labelHoverShadow:"default",labelHoverShadowColor:"#000",nodeHoverColor:"node",defaultNodeHoverColor:"#000",labelHoverBGColor:"default",defaultHoverLabelBGColor:"#fff",labelHoverColor:"default",defaultLabelHoverColor:"#000",edgeHoverColor:"edge",edgeHoverSizeRatio:1,defaultEdgeHoverColor:"#000",edgeHoverExtremities:!1,drawEdges:!0,drawNodes:!0,drawLabels:!0,drawEdgeLabels:!1,batchEdgesDrawing:!1,hideEdgesOnMove:!1,canvasEdgesBatchSize:500,webglEdgesBatchSize:1e3,scalingMode:"inside",sideMargin:0,minEdgeSize:.5,maxEdgeSize:1,minNodeSize:1,maxNodeSize:8,touchEnabled:!0,mouseEnabled:!0,mouseWheelEnabled:!0,doubleClickEnabled:!0,eventsEnabled:!0,zoomingRatio:1.7,doubleClickZoomingRatio:2.2,zoomMin:.0625,zoomMax:2,mouseZoomDuration:200,doubleClickZoomDuration:200,mouseInertiaDuration:200,mouseInertiaRatio:3,touchInertiaDuration:200,touchInertiaRatio:3,doubleClickTimeout:300,doubleTapTimeout:300,dragTimeout:200,autoResize:!0,autoRescale:!0,enableCamera:!0,enableHovering:!0,enableEdgeHovering:!1,edgeHoverPrecision:5,rescaleIgnoreSize:!1,skipErrors:!1,nodesPowRatio:.5,edgesPowRatio:.5,animationsTime:200})}.call(this),function(){"use strict";function s(){Object.defineProperty(this,"_handlers",{value:{}})}s.prototype.bind=function(e,t){var i,s,r,o;if(1===arguments.length&&"object"==typeof arguments[0])for(e in arguments[0])this.bind(e,arguments[0][e]);else{if(2!==arguments.length||"function"!=typeof t)throw"bind: Wrong arguments.";for(i=0,s=(o="string"==typeof e?e.split(" "):e).length;i!==s;i+=1)(r=o[i])&&(this._handlers[r]||(this._handlers[r]=[]),this._handlers[r].push({handler:t}))}return this},s.prototype.unbind=function(e,t){var i,s,r,o,a,n,l,d="string"==typeof e?e.split(" "):e;if(!arguments.length){for(a in this._handlers)delete this._handlers[a];return this}if(t)for(i=0,s=d.length;i!==s;i+=1){if(l=d[i],this._handlers[l]){for(n=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler!==t&&n.push(this._handlers[l][r]);this._handlers[l]=n}this._handlers[l]&&0===this._handlers[l].length&&delete this._handlers[l]}else for(i=0,s=d.length;i!==s;i+=1)delete this._handlers[d[i]];return this},s.prototype.dispatchEvent=function(e,t){var i,s,r,o,a,n,l,d="string"==typeof e?e.split(" "):e;for(t=void 0===t?{}:t,i=0,s=d.length;i!==s;i+=1)if(l=d[i],this._handlers[l]){for(n=this.getEvent(l,t),a=[],r=0,o=this._handlers[l].length;r!==o;r+=1)this._handlers[l][r].handler(n),this._handlers[l][r].one||a.push(this._handlers[l][r]);this._handlers[l]=a}return this},s.prototype.getEvent=function(e,t){return{type:e,data:t||{},target:this}},s.extend=function(e,t){for(var i in s.prototype)s.prototype.hasOwnProperty(i)&&(e[i]=s.prototype[i]);s.apply(e,t)},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.dispatcher=s):"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=s:exports).dispatcher=s:this.dispatcher=s}.call(this),function(){"use strict";function i(){function a(e,t){var i,s,r,o;if(1!==arguments.length||"string"!=typeof e){if("object"==typeof e&&"string"==typeof t)return void 0!==(e||{})[t]?e[t]:a(t);for(i="object"==typeof e&&void 0===t?e:{},"string"==typeof e&&(i[e]=t),s=0,r=(o=Object.keys(i)).length;s<r;s++)n[o[s]]=i[o[s]];return this}if(void 0!==n[e])return n[e];for(s=0,r=l.length;s<r;s++)if(void 0!==l[s][e])return l[s][e]}var e,t,n={},l=Array.prototype.slice.call(arguments,0);for(a.embedObjects=function(){var e=l.concat(n).concat(Array.prototype.splice.call(arguments,0));return i.apply({},e)},e=0,t=arguments.length;e<t;e++)a(arguments[e]);return a}void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.configurable=i):"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=i:exports).configurable=i:this.configurable=i}.call(this),function(e){"use strict";function s(e){var t,i,s={settings:e||d,nodesArray:[],edgesArray:[],nodesIndex:Object.create(null),edgesIndex:Object.create(null),inNeighborsIndex:Object.create(null),outNeighborsIndex:Object.create(null),allNeighborsIndex:Object.create(null),inNeighborsCount:Object.create(null),outNeighborsCount:Object.create(null),allNeighborsCount:Object.create(null)};for(t in a)a[t].call(s);for(t in r)i=function(i,s,r){return function(){var e,t;for(e in l[i])l[i][e].apply(s,arguments);for(e in t=r.apply(s,arguments),n[i])n[i][e].apply(s,arguments);return t}}(t,s,r[t]),this[t]=i,s[t]=i}var r=Object.create(null),o=Object.create(null),a=Object.create(null),n=Object.create(null),l=Object.create(null),t={immutable:!0,clone:!0},d=function(e){return t[e]};function i(e){for(var t in e)"hasOwnProperty"in e&&!e.hasOwnProperty(t)||delete e[t];return e}s.addMethod=function(e,t){if("string"!=typeof e||"function"!=typeof t||2!==arguments.length)throw"addMethod: Wrong arguments.";if(r[e]||s[e])throw'The method "'+e+'" already exists.';return r[e]=t,n[e]=Object.create(null),l[e]=Object.create(null),this},s.hasMethod=function(e){return!(!r[e]&&!s[e])},s.attach=function(e,t,i,s){if("string"!=typeof e||"string"!=typeof t||"function"!=typeof i||arguments.length<3||4<arguments.length)throw"attach: Wrong arguments.";var r;if("constructor"===e)r=a;else if(s){if(!l[e])throw'The method "'+e+'" does not exist.';r=l[e]}else{if(!n[e])throw'The method "'+e+'" does not exist.';r=n[e]}if(r[t])throw'A function "'+t+'" is already attached to the method "'+e+'".';return r[t]=i,this},s.attachBefore=function(e,t,i){return this.attach(e,t,i,!0)},s.addIndex=function(e,t){if("string"!=typeof e||Object(t)!==t||2!==arguments.length)throw"addIndex: Wrong arguments.";if(o[e])throw'The index "'+e+'" already exists.';for(var i in o[e]=t){if("function"!=typeof t[i])throw"The bindings must be functions.";s.attach(i,e,t[i])}return this},s.addMethod("addNode",function(e){if(Object(e)!==e||1!==arguments.length)throw"addNode: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The node must have a string or number id.";if(this.nodesIndex[e.id])throw'The node "'+e.id+'" already exists.';var t,i=e.id,s=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&(s[t]=e[t]);else s=e;return this.settings("immutable")?Object.defineProperty(s,"id",{value:i,enumerable:!0}):s.id=i,this.inNeighborsIndex[i]=Object.create(null),this.outNeighborsIndex[i]=Object.create(null),this.allNeighborsIndex[i]=Object.create(null),this.inNeighborsCount[i]=0,this.outNeighborsCount[i]=0,this.allNeighborsCount[i]=0,this.nodesArray.push(s),this.nodesIndex[s.id]=s,this}),s.addMethod("addEdge",function(e){if(Object(e)!==e||1!==arguments.length)throw"addEdge: Wrong arguments.";if("string"!=typeof e.id&&"number"!=typeof e.id)throw"The edge must have a string or number id.";if("string"!=typeof e.source&&"number"!=typeof e.source||!this.nodesIndex[e.source])throw"The edge source must have an existing node id.";if("string"!=typeof e.target&&"number"!=typeof e.target||!this.nodesIndex[e.target])throw"The edge target must have an existing node id.";if(this.edgesIndex[e.id])throw'The edge "'+e.id+'" already exists.';var t,i=Object.create(null);if(this.settings("clone"))for(t in e)"id"!==t&&"source"!==t&&"target"!==t&&(i[t]=e[t]);else i=e;return this.settings("immutable")?(Object.defineProperty(i,"id",{value:e.id,enumerable:!0}),Object.defineProperty(i,"source",{value:e.source,enumerable:!0}),Object.defineProperty(i,"target",{value:e.target,enumerable:!0})):(i.id=e.id,i.source=e.source,i.target=e.target),this.edgesArray.push(i),this.edgesIndex[i.id]=i,this.inNeighborsIndex[i.target][i.source]||(this.inNeighborsIndex[i.target][i.source]=Object.create(null)),this.inNeighborsIndex[i.target][i.source][i.id]=i,this.outNeighborsIndex[i.source][i.target]||(this.outNeighborsIndex[i.source][i.target]=Object.create(null)),this.outNeighborsIndex[i.source][i.target][i.id]=i,this.allNeighborsIndex[i.source][i.target]||(this.allNeighborsIndex[i.source][i.target]=Object.create(null)),(this.allNeighborsIndex[i.source][i.target][i.id]=i).target!==i.source&&(this.allNeighborsIndex[i.target][i.source]||(this.allNeighborsIndex[i.target][i.source]=Object.create(null)),this.allNeighborsIndex[i.target][i.source][i.id]=i),this.inNeighborsCount[i.target]++,this.outNeighborsCount[i.source]++,this.allNeighborsCount[i.target]++,this.allNeighborsCount[i.source]++,this}),s.addMethod("dropNode",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropNode: Wrong arguments.";if(!this.nodesIndex[e])throw'The node "'+e+'" does not exist.';var t,i,s;for(delete this.nodesIndex[e],t=0,s=this.nodesArray.length;t<s;t++)if(this.nodesArray[t].id===e){this.nodesArray.splice(t,1);break}for(t=this.edgesArray.length-1;0<=t;t--)this.edgesArray[t].source!==e&&this.edgesArray[t].target!==e||this.dropEdge(this.edgesArray[t].id);for(i in delete this.inNeighborsIndex[e],delete this.outNeighborsIndex[e],delete this.allNeighborsIndex[e],delete this.inNeighborsCount[e],delete this.outNeighborsCount[e],delete this.allNeighborsCount[e],this.nodesIndex)delete this.inNeighborsIndex[i][e],delete this.outNeighborsIndex[i][e],delete this.allNeighborsIndex[i][e];return this}),s.addMethod("dropEdge",function(e){if("string"!=typeof e&&"number"!=typeof e||1!==arguments.length)throw"dropEdge: Wrong arguments.";if(!this.edgesIndex[e])throw'The edge "'+e+'" does not exist.';var t,i,s=this.edgesIndex[e];for(delete this.edgesIndex[e],t=0,i=this.edgesArray.length;t<i;t++)if(this.edgesArray[t].id===e){this.edgesArray.splice(t,1);break}return delete this.inNeighborsIndex[s.target][s.source][s.id],Object.keys(this.inNeighborsIndex[s.target][s.source]).length||delete this.inNeighborsIndex[s.target][s.source],delete this.outNeighborsIndex[s.source][s.target][s.id],Object.keys(this.outNeighborsIndex[s.source][s.target]).length||delete this.outNeighborsIndex[s.source][s.target],delete this.allNeighborsIndex[s.source][s.target][s.id],Object.keys(this.allNeighborsIndex[s.source][s.target]).length||delete this.allNeighborsIndex[s.source][s.target],s.target!==s.source&&(delete this.allNeighborsIndex[s.target][s.source][s.id],Object.keys(this.allNeighborsIndex[s.target][s.source]).length||delete this.allNeighborsIndex[s.target][s.source]),this.inNeighborsCount[s.target]--,this.outNeighborsCount[s.source]--,this.allNeighborsCount[s.source]--,this.allNeighborsCount[s.target]--,this}),s.addMethod("kill",function(){this.nodesArray.length=0,this.edgesArray.length=0,delete this.nodesArray,delete this.edgesArray,delete this.nodesIndex,delete this.edgesIndex,delete this.inNeighborsIndex,delete this.outNeighborsIndex,delete this.allNeighborsIndex,delete this.inNeighborsCount,delete this.outNeighborsCount,delete this.allNeighborsCount}),s.addMethod("clear",function(){return this.nodesArray.length=0,this.edgesArray.length=0,i(this.nodesIndex),i(this.edgesIndex),i(this.nodesIndex),i(this.inNeighborsIndex),i(this.outNeighborsIndex),i(this.allNeighborsIndex),i(this.inNeighborsCount),i(this.outNeighborsCount),i(this.allNeighborsCount),this}),s.addMethod("read",function(e){for(var t=e.nodes||[],i=0,s=t.length;i<s;i++)this.addNode(t[i]);for(i=0,s=(t=e.edges||[]).length;i<s;i++)this.addEdge(t[i]);return this}),s.addMethod("nodes",function(e){if(!arguments.length)return this.nodesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.nodesIndex[e];if(1!==arguments.length||"[object Array]"!==Object.prototype.toString.call(e))throw"nodes: Wrong arguments.";for(var t=[],i=0,s=e.length;i<s;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"nodes: Wrong arguments.";t.push(this.nodesIndex[e[i]])}return t}),s.addMethod("degree",function(e,t){if(t={in:this.inNeighborsCount,out:this.outNeighborsCount}[t||""]||this.allNeighborsCount,"string"==typeof e||"number"==typeof e)return t[e];if("[object Array]"!==Object.prototype.toString.call(e))throw"degree: Wrong arguments.";for(var i=[],s=0,r=e.length;s<r;s++){if("string"!=typeof e[s]&&"number"!=typeof e[s])throw"degree: Wrong arguments.";i.push(t[e[s]])}return i}),s.addMethod("edges",function(e){if(!arguments.length)return this.edgesArray.slice(0);if(1===arguments.length&&("string"==typeof e||"number"==typeof e))return this.edgesIndex[e];if(1!==arguments.length||"[object Array]"!==Object.prototype.toString.call(e))throw"edges: Wrong arguments.";for(var t=[],i=0,s=e.length;i<s;i++){if("string"!=typeof e[i]&&"number"!=typeof e[i])throw"edges: Wrong arguments.";t.push(this.edgesIndex[e[i]])}return t}),"undefined"!=typeof sigma?(sigma.classes=sigma.classes||Object.create(null),sigma.classes.graph=s):"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=s:exports).graph=s:this.graph=s}.call(this),function(m){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.classes"),sigma.classes.camera=function(e,t,i,s){sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"graph",{value:t}),Object.defineProperty(this,"id",{value:e}),Object.defineProperty(this,"readPrefix",{value:"read_cam"+e+":"}),Object.defineProperty(this,"prefix",{value:"cam"+e+":"}),this.x=0,this.y=0,this.ratio=1,this.angle=0,this.isAnimated=!1,this.settings="object"==typeof s&&s?i.embedObject(s):i},sigma.classes.camera.prototype.goTo=function(e){if(!this.settings("enableCamera"))return this;for(var t=e||{},i=["x","y","ratio","angle"],s=0,r=i.length;s<r;s++)if(t[i[s]]!==m){if("number"!=typeof t[i[s]]||isNaN(t[i[s]]))throw'Value for "'+i[s]+'" is not a number.';this[i[s]]=t[i[s]]}return this.dispatchEvent("coordinatesUpdated"),this},sigma.classes.camera.prototype.applyView=function(e,t,i){t=t!==m?t:this.prefix,e=e!==m?e:this.readPrefix;for(var s,r=(i=i||{}).nodes||this.graph.nodes(),o=i.edges||this.graph.edges(),a=Math.cos(this.angle)/this.ratio,n=Math.sin(this.angle)/this.ratio,l=Math.pow(this.ratio,this.settings("nodesPowRatio")),d=Math.pow(this.ratio,this.settings("edgesPowRatio")),h=(i.width||0)/2-this.x*a-this.y*n,g=(i.height||0)/2-this.y*a+this.x*n,c=0,u=r.length;c<u;c++)(s=r[c])[t+"x"]=(s[e+"x"]||0)*a+(s[e+"y"]||0)*n+h,s[t+"y"]=(s[e+"y"]||0)*a-(s[e+"x"]||0)*n+g,s[t+"size"]=(s[e+"size"]||0)/l;for(c=0,u=o.length;c<u;c++)o[c][t+"size"]=(o[c][e+"size"]||0)/d;return this},sigma.classes.camera.prototype.graphPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:(e*o+t*a)/this.ratio+s,y:(t*o-e*a)/this.ratio+r}},sigma.classes.camera.prototype.cameraPosition=function(e,t,i){var s=0,r=0,o=Math.cos(this.angle),a=Math.sin(this.angle);return i||(s=-(this.x*o+this.y*a)/this.ratio,r=-(this.y*o-this.x*a)/this.ratio),{x:((e-s)*o-(t-r)*a)*this.ratio,y:((t-r)*o+(e-s)*a)*this.ratio}},sigma.classes.camera.prototype.getMatrix=function(){var e=sigma.utils.matrices.scale(1/this.ratio),t=sigma.utils.matrices.rotation(this.angle),i=sigma.utils.matrices.translation(-this.x,-this.y);return sigma.utils.matrices.multiply(i,sigma.utils.matrices.multiply(t,e))},sigma.classes.camera.prototype.getRectangle=function(e,t){var i=this.cameraPosition(e,0,!0),s=this.cameraPosition(0,t,!0),r=this.cameraPosition(e/2,t/2,!0),e=this.cameraPosition(e/4,0,!0).x,t=this.cameraPosition(0,t/4,!0).y;return{x1:this.x-r.x-e,y1:this.y-r.y-t,x2:this.x-r.x+e+i.x,y2:this.y-r.y-t+i.y,height:Math.sqrt(Math.pow(s.x,2)+Math.pow(s.y+2*t,2))}}}.call(this),function(h){"use strict";var a={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){e=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:e*t.x,y:e*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;o<4;o++){var a=this.projection(t[o],e),n=this.projection(i[o],e);s.push(a.x*e.x+a.y*e.y),r.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return Math.min.apply(Math,r)<=l&&h<=d},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;r<4;r++)s=s&&this.axisCollision(i[r],e,t);return s}};function n(e,t){for(var i=[],s=0;s<4;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function l(e,t){for(var i=[],s=0;s<4;s++)a.collision(e,t[s])&&i.push(s);return i}function d(e,t,i){if(i.level<i.maxLevel)for(var s=n(t,i.corners),r=0,o=s.length;r<o;r++)i.nodes[s[r]]===h&&(i.nodes[s[r]]=function(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=n,s=l;break;case 1:i=n+o,s=l;break;case 2:i=n,s=l+a;break;case 3:i=n+o,s=l+a}return g({x:i,y:s,width:o,height:a},r,t.maxElements,t.maxLevel)}(s[r],i)),d(e,t,i.nodes[s[r]]);else i.elements.push(e)}function g(e,t,i,s){return{level:t||0,bounds:e,corners:a.splitSquare(e),maxElements:i||20,maxLevel:s||4,elements:[],nodes:[]}}function e(){this._geom=a,this._tree=null,this._cache={query:!1,result:!1}}e.prototype.index=function(e,t){if(!t.bounds)throw"sigma.classes.quad.index: bounds information not given.";var i=t.prefix||"";this._tree=g(t.bounds,0,t.maxElements,t.maxLevel);for(var s=0,r=e.length;s<r;s++)d(e[s],a.pointToSquare({x:e[s][i+"x"],y:e[s][i+"y"],size:e[s][i+"size"]}),this._tree);return this._cache={query:!1,result:!1},this._tree},e.prototype.point=function(e,t){return this._tree&&function e(t,i){if(i.level<i.maxLevel)return s=i.bounds,r=s.x+s.width/2,s=s.y+s.height/2,s=t.y<s,r=t.x<r,r=s?r?0:1:r?2:3,i.nodes[r]!==h?e(t,i.nodes[r]):[];return i.elements;var s,r}({x:e,y:t},this._tree)||[]},e.prototype.area=function(e){var t,i=JSON.stringify(e);if(this._cache.query===i)return this._cache.result;var s,e=a.isAxisAligned(e)?(t=n,a.axisAlignedTopPoints(e)):(t=l,a.rectangleCorners(e)),r=this._tree?function e(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),a=0,n=o.length;a<n;a++)i.nodes[o[a]]!==h&&e(t,i.nodes[o[a]],s,r);else for(var l=0,d=i.elements.length;l<d;l++)r[i.elements[l].id]===h&&(r[i.elements[l].id]=i.elements[l]);return r}(e,this._tree,t):[],o=[];for(s in r)o.push(r[s]);return this._cache.query=i,this._cache.result=o},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.quad=e):"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=e:exports).quad=e:this.quad=e}.call(this),function(h){"use strict";var g={pointToSquare:function(e){return{x1:e.x-e.size,y1:e.y-e.size,x2:e.x+e.size,y2:e.y-e.size,height:2*e.size}},lineToSquare:function(e){return e.y1<e.y2?e.x1<e.x2?{x1:e.x1-e.size,y1:e.y1-e.size,x2:e.x2+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:{x1:e.x2-e.size,y1:e.y1-e.size,x2:e.x1+e.size,y2:e.y1-e.size,height:e.y2-e.y1+2*e.size}:e.x1<e.x2?{x1:e.x1-e.size,y1:e.y2-e.size,x2:e.x2+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}:{x1:e.x2-e.size,y1:e.y2-e.size,x2:e.x1+e.size,y2:e.y2-e.size,height:e.y1-e.y2+2*e.size}},quadraticCurveToSquare:function(e,t){var i=sigma.utils.getPointOnQuadraticCurve(.5,e.x1,e.y1,e.x2,e.y2,t.x,t.y),s=Math.min(e.x1,e.x2,i.x),r=Math.max(e.x1,e.x2,i.x),t=Math.min(e.y1,e.y2,i.y),i=Math.max(e.y1,e.y2,i.y);return{x1:s-e.size,y1:t-e.size,x2:r+e.size,y2:t-e.size,height:i-t+2*e.size}},selfLoopToSquare:function(e){var t=sigma.utils.getSelfLoopControlPoints(e.x,e.y,e.size),i=Math.min(e.x,t.x1,t.x2),s=Math.max(e.x,t.x1,t.x2),r=Math.min(e.y,t.y1,t.y2),t=Math.max(e.y,t.y1,t.y2);return{x1:i-e.size,y1:r-e.size,x2:s+e.size,y2:r-e.size,height:t-r+2*e.size}},isAxisAligned:function(e){return e.x1===e.x2||e.y1===e.y2},axisAlignedTopPoints:function(e){return e.y1===e.y2&&e.x1<e.x2?e:e.x1===e.x2&&e.y2>e.y1?{x1:e.x1-e.height,y1:e.y1,x2:e.x1,y2:e.y1,height:e.height}:e.x1===e.x2&&e.y2<e.y1?{x1:e.x1,y1:e.y2,x2:e.x2+e.height,y2:e.y2,height:e.height}:{x1:e.x2,y1:e.y1-e.height,x2:e.x1,y2:e.y1-e.height,height:e.height}},lowerLeftCoor:function(e){var t=Math.sqrt(Math.pow(e.x2-e.x1,2)+Math.pow(e.y2-e.y1,2));return{x:e.x1-(e.y2-e.y1)*e.height/t,y:e.y1+(e.x2-e.x1)*e.height/t}},lowerRightCoor:function(e,t){return{x:t.x-e.x1+e.x2,y:t.y-e.y1+e.y2}},rectangleCorners:function(e){var t=this.lowerLeftCoor(e),i=this.lowerRightCoor(e,t);return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:t.x,y:t.y},{x:i.x,y:i.y}]},splitSquare:function(e){return[[{x:e.x,y:e.y},{x:e.x+e.width/2,y:e.y},{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2}],[{x:e.x+e.width/2,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2}],[{x:e.x,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x,y:e.y+e.height},{x:e.x+e.width/2,y:e.y+e.height}],[{x:e.x+e.width/2,y:e.y+e.height/2},{x:e.x+e.width,y:e.y+e.height/2},{x:e.x+e.width/2,y:e.y+e.height},{x:e.x+e.width,y:e.y+e.height}]]},axis:function(e,t){return[{x:e[1].x-e[0].x,y:e[1].y-e[0].y},{x:e[1].x-e[3].x,y:e[1].y-e[3].y},{x:t[0].x-t[2].x,y:t[0].y-t[2].y},{x:t[0].x-t[1].x,y:t[0].y-t[1].y}]},projection:function(e,t){e=(e.x*t.x+e.y*t.y)/(Math.pow(t.x,2)+Math.pow(t.y,2));return{x:e*t.x,y:e*t.y}},axisCollision:function(e,t,i){for(var s=[],r=[],o=0;o<4;o++){var a=this.projection(t[o],e),n=this.projection(i[o],e);s.push(a.x*e.x+a.y*e.y),r.push(n.x*e.x+n.y*e.y)}var l=Math.max.apply(Math,s),d=Math.max.apply(Math,r),h=Math.min.apply(Math,s);return Math.min.apply(Math,r)<=l&&h<=d},collision:function(e,t){for(var i=this.axis(e,t),s=!0,r=0;r<4;r++)s=s&&this.axisCollision(i[r],e,t);return s}};function a(e,t){for(var i=[],s=0;s<4;s++)e.x2>=t[s][0].x&&e.x1<=t[s][1].x&&e.y1+e.height>=t[s][0].y&&e.y1<=t[s][2].y&&i.push(s);return i}function n(e,t){for(var i=[],s=0;s<4;s++)g.collision(e,t[s])&&i.push(s);return i}function c(e,t,i){if(i.level<i.maxLevel)for(var s=a(t,i.corners),r=0,o=s.length;r<o;r++)i.nodes[s[r]]===h&&(i.nodes[s[r]]=function(e,t){var i,s,r=t.level+1,o=Math.round(t.bounds.width/2),a=Math.round(t.bounds.height/2),n=Math.round(t.bounds.x),l=Math.round(t.bounds.y);switch(e){case 0:i=n,s=l;break;case 1:i=n+o,s=l;break;case 2:i=n,s=l+a;break;case 3:i=n+o,s=l+a}return u({x:i,y:s,width:o,height:a},r,t.maxElements,t.maxLevel)}(s[r],i)),c(e,t,i.nodes[s[r]]);else i.elements.push(e)}function u(e,t,i,s){return{level:t||0,bounds:e,corners:g.splitSquare(e),maxElements:i||40,maxLevel:s||8,elements:[],nodes:[]}}function e(){this._geom=g,this._tree=null,this._cache={query:!1,result:!1},this._enabled=!0}e.prototype.index=function(e,t){if(!this._enabled)return this._tree;if(!t.bounds)throw"sigma.classes.edgequad.index: bounds information not given.";var i,s,r,o,a=t.prefix||"";this._tree=u(t.bounds,0,t.maxElements,t.maxLevel);for(var n=e.edges(),l=0,d=n.length;l<d;l++)i=e.nodes(n[l].source),s=e.nodes(n[l].target),o={x1:i[a+"x"],y1:i[a+"y"],x2:s[a+"x"],y2:s[a+"y"],size:n[l][a+"size"]||0},"curve"===n[l].type||"curvedArrow"===n[l].type?i.id===s.id?(r={x:i[a+"x"],y:i[a+"y"],size:i[a+"size"]||0},c(n[l],g.selfLoopToSquare(r),this._tree)):(r=sigma.utils.getQuadraticControlPoint(o.x1,o.y1,o.x2,o.y2),c(n[l],g.quadraticCurveToSquare(o,r),this._tree)):c(n[l],g.lineToSquare(o),this._tree);return this._cache={query:!1,result:!1},this._tree},e.prototype.point=function(e,t){return this._enabled&&this._tree&&function e(t,i){if(i.level<i.maxLevel)return s=i.bounds,r=s.x+s.width/2,s=s.y+s.height/2,s=t.y<s,r=t.x<r,r=s?r?0:1:r?2:3,i.nodes[r]!==h?e(t,i.nodes[r]):[];return i.elements;var s,r}({x:e,y:t},this._tree)||[]},e.prototype.area=function(e){if(!this._enabled)return[];var t,i=JSON.stringify(e);if(this._cache.query===i)return this._cache.result;var s,e=g.isAxisAligned(e)?(t=a,g.axisAlignedTopPoints(e)):(t=n,g.rectangleCorners(e)),r=this._tree?function e(t,i,s,r){if(r=r||{},i.level<i.maxLevel)for(var o=s(t,i.corners),a=0,n=o.length;a<n;a++)i.nodes[o[a]]!==h&&e(t,i.nodes[o[a]],s,r);else for(var l=0,d=i.elements.length;l<d;l++)r[i.elements[l].id]===h&&(r[i.elements[l].id]=i.elements[l]);return r}(e,this._tree,t):[],o=[];for(s in r)o.push(r[s]);return this._cache.query=i,this._cache.result=o},void 0!==this.sigma?(this.sigma.classes=this.sigma.classes||{},this.sigma.classes.edgequad=e):"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=e:exports).edgequad=e:this.edgequad=e}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.mouse=function(e,t,i){var s,r,o,a,n,l,d,h,g,c,u,m=this,f=e,p=t,y=i;function x(e){var t,i;if(y("mouseEnabled")&&(m.dispatchEvent("mousemove",sigma.utils.mouseCoords(e)),d))return g=h=!0,u&&clearTimeout(u),u=setTimeout(function(){h=!1},y("dragTimeout")),sigma.misc.animation.killAll(p),p.isMoving=!0,i=p.cameraPosition(sigma.utils.getX(e)-n,sigma.utils.getY(e)-l,!0),t=s-i.x,i=r-i.y,t===p.x&&i===p.y||(o=p.x,a=p.y,p.goTo({x:t,y:i})),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function b(e){var t,i;y("mouseEnabled")&&d&&(d=!1,u&&clearTimeout(u),p.isMoving=!1,t=sigma.utils.getX(e),i=sigma.utils.getY(e),h?(sigma.misc.animation.killAll(p),sigma.misc.animation.camera(p,{x:p.x+y("mouseInertiaRatio")*(p.x-o),y:p.y+y("mouseInertiaRatio")*(p.y-a)},{easing:"quadraticOut",duration:y("mouseInertiaDuration")})):n===t&&l===i||p.goTo({x:p.x,y:p.y}),m.dispatchEvent("mouseup",sigma.utils.mouseCoords(e)),h=!1)}function v(e){if(y("mouseEnabled"))switch(s=p.x,r=p.y,o=p.x,a=p.y,n=sigma.utils.getX(e),l=sigma.utils.getY(e),g=!1,c=(new Date).getTime(),e.which){case 2:break;case 3:m.dispatchEvent("rightclick",sigma.utils.mouseCoords(e,n,l));break;default:d=!0,m.dispatchEvent("mousedown",sigma.utils.mouseCoords(e,n,l))}}function E(e){y("mouseEnabled")&&m.dispatchEvent("mouseout")}function w(e){var t;return y("mouseEnabled")&&((t=sigma.utils.mouseCoords(e)).isDragging=100<(new Date).getTime()-c&&g,m.dispatchEvent("click",t)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}function A(e){var t,i,s=sigma.utils.getDelta(e);if(y("mouseEnabled")&&y("mouseWheelEnabled")&&0!==s)return i=0<s?1/y("zoomingRatio"):y("zoomingRatio"),t=p.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:y("mouseZoomDuration")},sigma.utils.zoomTo(p,t.x,t.y,i,s),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(f,"click",function(e){var t,i,s;if(y("mouseEnabled"))return i=1/y("doubleClickZoomingRatio"),m.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,n,l)),y("doubleClickEnabled")&&(t=p.cameraPosition(sigma.utils.getX(e)-sigma.utils.getCenter(e).x,sigma.utils.getY(e)-sigma.utils.getCenter(e).y,!0),s={duration:y("doubleClickZoomDuration")},sigma.utils.zoomTo(p,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),f.addEventListener("DOMMouseScroll",A,!1),f.addEventListener("mousewheel",A,!1),f.addEventListener("mousemove",x,!1),f.addEventListener("mousedown",v,!1),f.addEventListener("click",w,!1),f.addEventListener("mouseout",E,!1),document.addEventListener("mouseup",b,!1),this.kill=function(){sigma.utils.unbindDoubleClick(f,"click"),f.removeEventListener("DOMMouseScroll",A),f.removeEventListener("mousewheel",A),f.removeEventListener("mousemove",x),f.removeEventListener("mousedown",v),f.removeEventListener("click",w),f.removeEventListener("mouseout",E),document.removeEventListener("mouseup",b)}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.captors"),sigma.captors.touch=function(e,t,i){var c,u,m,f,p,y,x,b,v,E,w,A,T,S,C,_,N=this,s=e,P=t,M=i,k=[];function O(e){var t=sigma.utils.getOffset(s);return{x:e.pageX-t.left,y:e.pageY-t.top}}function r(e){var t,i,s,r;if(M("touchEnabled"))switch((k=e.touches).length){case 1:P.isMoving=!0,T=1,c=P.x,u=P.y,p=P.x,y=P.y,s=O(k[0]),x=s.x,b=s.y;break;case 2:return P.isMoving=!0,T=2,s=O(k[0]),r=O(k[1]),t=s.x,i=s.y,s=r.x,r=r.y,p=P.x,y=P.y,m=P.angle,f=P.ratio,c=P.x,u=P.y,x=t,b=i,v=s,E=r,w=Math.atan2(E-b,v-x),A=Math.sqrt((E-b)*(E-b)+(v-x)*(v-x)),e.preventDefault(),!1}}function o(e){if(M("touchEnabled")){k=e.touches;var t=M("touchInertiaRatio");switch(_&&(S=!1,clearTimeout(_)),T){case 2:if(1===e.touches.length){r(e),e.preventDefault();break}case 1:P.isMoving=!1,N.dispatchEvent("stopDrag"),S&&(C=!1,sigma.misc.animation.camera(P,{x:P.x+t*(P.x-p),y:P.y+t*(P.y-y)},{easing:"quadraticOut",duration:M("touchInertiaDuration")})),S=!1,T=0}}}function a(e){if(!C&&M("touchEnabled")){var t,i,s,r,o,a,n,l,d,h,g;switch(k=e.touches,S=!0,_&&clearTimeout(_),_=setTimeout(function(){S=!1},M("dragTimeout")),T){case 1:t=(n=O(k[0])).x,s=n.y,a=P.cameraPosition(t-x,s-b,!0),l=c-a.x,d=u-a.y,l===P.x&&d===P.y||(p=P.x,y=P.y,P.goTo({x:l,y:d}),N.dispatchEvent("mousemove",sigma.utils.mouseCoords(e,n.x,n.y)),N.dispatchEvent("drag"));break;case 2:n=O(k[0]),h=O(k[1]),t=n.x,s=n.y,i=h.x,r=h.y,g=P.cameraPosition((x+v)/2-sigma.utils.getCenter(e).x,(b+E)/2-sigma.utils.getCenter(e).y,!0),o=P.cameraPosition((t+i)/2-sigma.utils.getCenter(e).x,(s+r)/2-sigma.utils.getCenter(e).y,!0),a=Math.atan2(r-s,i-t)-w,n=Math.sqrt((r-s)*(r-s)+(i-t)*(i-t))/A,t=g.x,s=g.y,h=f/n,t*=n,g=m-a,r=(s*=n)*(n=Math.cos(-a))-t*(a=Math.sin(-a)),l=(t=t*n+s*a)-o.x+c,d=(s=r)-o.y+u,h===P.ratio&&g===P.angle&&l===P.x&&d===P.y||(p=P.x,y=P.y,P.angle,P.ratio,P.goTo({x:l,y:d,angle:g,ratio:h}),N.dispatchEvent("drag"))}return e.preventDefault(),!1}}sigma.classes.dispatcher.extend(this),sigma.utils.doubleClick(s,"touchstart",function(e){var t,i,s;if(e.touches&&1===e.touches.length&&M("touchEnabled"))return C=!0,i=1/M("doubleClickZoomingRatio"),t=O(e.touches[0]),N.dispatchEvent("doubleclick",sigma.utils.mouseCoords(e,t.x,t.y)),M("doubleClickEnabled")&&(t=P.cameraPosition(t.x-sigma.utils.getCenter(e).x,t.y-sigma.utils.getCenter(e).y,!0),s={duration:M("doubleClickZoomDuration"),onComplete:function(){C=!1}},sigma.utils.zoomTo(P,t.x,t.y,i,s)),e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation(),!1}),s.addEventListener("touchstart",r,!1),s.addEventListener("touchend",o,!1),s.addEventListener("touchcancel",o,!1),s.addEventListener("touchleave",o,!1),s.addEventListener("touchmove",a,!1),this.kill=function(){sigma.utils.unbindDoubleClick(s,"touchstart"),s.addEventListener("touchstart",r),s.addEventListener("touchend",o),s.addEventListener("touchcancel",o),s.addEventListener("touchleave",o),s.addEventListener("touchmove",a)}}}.call(this),function(E){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.canvas=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.canvas: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n;for(sigma.classes.dispatcher.extend(this),Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.nodesOnScreen=[],this.edgesOnScreen=[],this.jobs={},this.options.prefix="renderer"+this.conradId+":",this.settings("batchEdgesDrawing")?(this.initDOM("canvas","edges"),this.initDOM("canvas","scene")):(this.initDOM("canvas","scene"),this.contexts.edges=this.contexts.scene),this.contexts.nodes=this.contexts.scene,this.contexts.labels=this.contexts.scene,this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],r=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;r<o;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.options.prefix),sigma.misc.drawHovers.call(this,this.options.prefix),this.resize(!1)},sigma.renderers.canvas.prototype.render=function(e){e=e||{};var t,i,s,r,o,a,n,l,d,h,g,c,u={},m=this.graph,f=this.graph.nodes,p=(this.options.prefix,this.settings(e,"drawEdges")),y=this.settings(e,"drawNodes"),x=this.settings(e,"drawLabels"),b=this.settings(e,"drawEdgeLabels"),v=this.settings.embedObjects(e,{prefix:this.options.prefix});for(s in this.resize(!1),this.settings(e,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(p=!1),this.camera.applyView(E,this.options.prefix,{width:this.width,height:this.height}),this.clear(),this.jobs)conrad.hasJob(s)&&conrad.killJob(s);for(this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),t=this.nodesOnScreen,i=0,r=t.length;i<r;i++)u[t[i].id]=t[i];if(p){for(t=m.edges(),i=0,r=t.length;i<r;i++)!u[(o=t[i]).source]&&!u[o.target]||o.hidden||f(o.source).hidden||f(o.target).hidden||this.edgesOnScreen.push(o);if(this.settings(e,"batchEdgesDrawing"))a="edges_"+this.conradId,g=v("canvasEdgesBatchSize"),r=(d=this.edgesOnScreen).length,l=0,n=Math.min(d.length,l+g),p=function(){for(c=this.contexts.edges.globalCompositeOperation,this.contexts.edges.globalCompositeOperation="destination-over",h=sigma.canvas.edges,i=l;i<n;i++)o=d[i],(h[o.type||this.settings(e,"defaultEdgeType")]||h.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.edges,v);if(b)for(h=sigma.canvas.edges.labels,i=l;i<n;i++)(o=d[i]).hidden||(h[o.type||this.settings(e,"defaultEdgeType")]||h.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.labels,v);return this.contexts.edges.globalCompositeOperation=c,n===d.length?(delete this.jobs[a],!1):(l=n+1,n=Math.min(d.length,l+g),!0)},this.jobs[a]=p,conrad.addJob(a,p.bind(this));else{for(h=sigma.canvas.edges,t=this.edgesOnScreen,i=0,r=t.length;i<r;i++)o=t[i],(h[o.type||this.settings(e,"defaultEdgeType")]||h.def)(o,m.nodes(o.source),m.nodes(o.target),this.contexts.edges,v);if(b)for(h=sigma.canvas.edges.labels,t=this.edgesOnScreen,i=0,r=t.length;i<r;i++)t[i].hidden||(h[t[i].type||this.settings(e,"defaultEdgeType")]||h.def)(t[i],m.nodes(t[i].source),m.nodes(t[i].target),this.contexts.labels,v)}}if(y)for(h=sigma.canvas.nodes,t=this.nodesOnScreen,i=0,r=t.length;i<r;i++)t[i].hidden||(h[t[i].type||this.settings(e,"defaultNodeType")]||h.def)(t[i],this.contexts.nodes,v);if(x)for(h=sigma.canvas.labels,t=this.nodesOnScreen,i=0,r=t.length;i<r;i++)t[i].hidden||(h[t[i].type||this.settings(e,"defaultNodeType")]||h.def)(t[i],this.contexts.labels,v);return this.dispatchEvent("render"),this},sigma.renderers.canvas.prototype.initDOM=function(e,t){var i=document.createElement(e);i.style.position="absolute",i.setAttribute("class","sigma-"+t),this.domElements[t]=i,this.container.appendChild(i),"canvas"===e.toLowerCase()&&(this.contexts[t]=i.getContext("2d"))},sigma.renderers.canvas.prototype.resize=function(e,t){var i,s=this.width,r=this.height,o=sigma.utils.getPixelRatio();if(e!==E&&t!==E?(this.width=e,this.height=t):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,e=this.width,t=this.height),s!==this.width||r!==this.height)for(i in this.domElements)this.domElements[i].style.width=e+"px",this.domElements[i].style.height=t+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.domElements[i].setAttribute("width",e*o+"px"),this.domElements[i].setAttribute("height",t*o+"px"),1!==o&&this.contexts[i].scale(o,o));return this},sigma.renderers.canvas.prototype.clear=function(){for(var e in this.contexts)this.contexts[e].clearRect(0,0,this.width,this.height);return this},sigma.renderers.canvas.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();for(e in delete this.captors,this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.canvas.nodes"),sigma.utils.pkg("sigma.canvas.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(m){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.webgl=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.webgl: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n;for(sigma.classes.dispatcher.extend(this),this.jobs={},Object.defineProperty(this,"conradId",{value:sigma.utils.id()}),this.graph=e,this.camera=t,this.contexts={},this.domElements={},this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.options.prefix=this.camera.readPrefix,Object.defineProperty(this,"nodePrograms",{value:{}}),Object.defineProperty(this,"edgePrograms",{value:{}}),Object.defineProperty(this,"nodeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeFloatArrays",{value:{}}),Object.defineProperty(this,"edgeIndicesArrays",{value:{}}),this.settings(s,"batchEdgesDrawing")?(this.initDOM("canvas","edges",!0),this.initDOM("canvas","nodes",!0)):(this.initDOM("canvas","scene",!0),this.contexts.nodes=this.contexts.scene,this.contexts.edges=this.contexts.scene),this.initDOM("canvas","labels"),this.initDOM("canvas","mouse"),this.contexts.hover=this.contexts.mouse,this.captors=[],r=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;r<o;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.mouse,this.camera,this.settings));sigma.misc.bindEvents.call(this,this.camera.prefix),sigma.misc.drawHovers.call(this,this.camera.prefix),this.resize()},sigma.renderers.webgl.prototype.process=function(){var e,t,i,s,r,o,a=this.graph,n=sigma.utils.extend(void 0,this.options),l=this.settings(n,"defaultEdgeType"),d=this.settings(n,"defaultNodeType");for(s in this.nodeFloatArrays)delete this.nodeFloatArrays[s];for(s in this.edgeFloatArrays)delete this.edgeFloatArrays[s];for(s in this.edgeIndicesArrays)delete this.edgeIndicesArrays[s];for(t=0,i=(e=a.edges()).length;t<i;t++)s=(r=e[t].type||l)&&sigma.webgl.edges[r]?r:"def",this.edgeFloatArrays[s]||(this.edgeFloatArrays[s]={edges:[]}),this.edgeFloatArrays[s].edges.push(e[t]);for(t=0,i=(e=a.nodes()).length;t<i;t++)s=(r=e[t].type||d)&&sigma.webgl.nodes[r]?r:"def",this.nodeFloatArrays[s]||(this.nodeFloatArrays[s]={nodes:[]}),this.nodeFloatArrays[s].nodes.push(e[t]);for(s in this.edgeFloatArrays){for(o=sigma.webgl.edges[s],e=this.edgeFloatArrays[s].edges,this.edgeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;t<i;t++)e[t].hidden||a.nodes(e[t].source).hidden||a.nodes(e[t].target).hidden||o.addEdge(e[t],a.nodes(e[t].source),a.nodes(e[t].target),this.edgeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,n.prefix,this.settings);"function"==typeof o.computeIndices&&(this.edgeIndicesArrays[s]=o.computeIndices(this.edgeFloatArrays[s].array))}for(s in this.nodeFloatArrays)for(o=sigma.webgl.nodes[s],e=this.nodeFloatArrays[s].nodes,this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES),t=0,i=e.length;t<i;t++)this.nodeFloatArrays[s].array||(this.nodeFloatArrays[s].array=new Float32Array(e.length*o.POINTS*o.ATTRIBUTES)),e[t].hidden||o.addNode(e[t],this.nodeFloatArrays[s].array,t*o.POINTS*o.ATTRIBUTES,n.prefix,this.settings);return this},sigma.renderers.webgl.prototype.render=function(e){var t,i,s,r,o,a,n=this,l=(this.graph,this.contexts.nodes),h=this.contexts.edges,g=this.camera.getMatrix(),c=sigma.utils.extend(e,this.options),d=this.settings(c,"drawLabels"),u=this.settings(c,"drawEdges"),e=this.settings(c,"drawNodes");for(r in this.resize(!1),this.settings(c,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(u=!1),this.clear(),g=sigma.utils.matrices.multiply(g,sigma.utils.matrices.translation(this.width/2,this.height/2)),this.jobs)conrad.hasJob(r)&&conrad.killJob(r);if(u)if(this.settings(c,"batchEdgesDrawing"))!function(){var e,t,i,s,r,o,a,n="edges_"+this.conradId,l=this.settings(c,"webglEdgesBatchSize"),d=Object.keys(this.edgeFloatArrays);d.length&&(e=0,a=sigma.webgl.edges[d[e]],i=this.edgeFloatArrays[d[e]].array,o=this.edgeIndicesArrays[d[e]],r=0,s=Math.min(r+l*a.POINTS,i.length/a.ATTRIBUTES),t=function(){return this.edgePrograms[d[e]]||(this.edgePrograms[d[e]]=a.initProgram(h)),r<s&&(h.useProgram(this.edgePrograms[d[e]]),a.render(h,this.edgePrograms[d[e]],i,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),start:r,count:s-r,indicesData:o})),s>=i.length/a.ATTRIBUTES&&e===d.length-1?(delete this.jobs[n],!1):(s=(r=s>=i.length/a.ATTRIBUTES?(e++,i=this.edgeFloatArrays[d[e]].array,a=sigma.webgl.edges[d[e]],0):s,Math.min(r+l*a.POINTS,i.length/a.ATTRIBUTES)),!0)},this.jobs[n]=t,conrad.addJob(n,t.bind(this)))}.call(this);else for(r in this.edgeFloatArrays)a=sigma.webgl.edges[r],this.edgePrograms[r]||(this.edgePrograms[r]=a.initProgram(h)),this.edgeFloatArrays[r]&&(h.useProgram(this.edgePrograms[r]),a.render(h,this.edgePrograms[r],this.edgeFloatArrays[r].array,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio"),indicesData:this.edgeIndicesArrays[r]}));if(e)for(r in l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),l.enable(l.BLEND),this.nodeFloatArrays)a=sigma.webgl.nodes[r],this.nodePrograms[r]||(this.nodePrograms[r]=a.initProgram(l)),this.nodeFloatArrays[r]&&(l.useProgram(this.nodePrograms[r]),a.render(l,this.nodePrograms[r],this.nodeFloatArrays[r].array,{settings:this.settings,matrix:g,width:this.width,height:this.height,ratio:this.camera.ratio,scalingRatio:this.settings(c,"webglOversamplingRatio")}));if(d)for(t=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),this.camera.applyView(m,m,{nodes:t,edges:[],width:this.width,height:this.height}),o=function(e){return n.settings({prefix:n.camera.prefix},e)},i=0,s=t.length;i<s;i++)t[i].hidden||(sigma.canvas.labels[t[i].type||this.settings(c,"defaultNodeType")]||sigma.canvas.labels.def)(t[i],this.contexts.labels,o);return this.dispatchEvent("render"),this},sigma.renderers.webgl.prototype.initDOM=function(e,t,i){var s=document.createElement(e),r=this;s.style.position="absolute",s.setAttribute("class","sigma-"+t),this.domElements[t]=s,this.container.appendChild(s),"canvas"===e.toLowerCase()&&(this.contexts[t]=s.getContext(i?"experimental-webgl":"2d",{preserveDrawingBuffer:!0}),i&&(s.addEventListener("webglcontextlost",function(e){e.preventDefault()},!1),s.addEventListener("webglcontextrestored",function(e){r.render()},!1)))},sigma.renderers.webgl.prototype.resize=function(e,t){var i,s=this.width,r=this.height,o=sigma.utils.getPixelRatio();if(e!==m&&t!==m?(this.width=e,this.height=t):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,e=this.width,t=this.height),s!==this.width||r!==this.height)for(i in this.domElements)this.domElements[i].style.width=e+"px",this.domElements[i].style.height=t+"px","canvas"===this.domElements[i].tagName.toLowerCase()&&(this.contexts[i]&&this.contexts[i].scale?(this.domElements[i].setAttribute("width",e*o+"px"),this.domElements[i].setAttribute("height",t*o+"px"),1!==o&&this.contexts[i].scale(o,o)):(this.domElements[i].setAttribute("width",e*this.settings("webglOversamplingRatio")+"px"),this.domElements[i].setAttribute("height",t*this.settings("webglOversamplingRatio")+"px")));for(i in this.contexts)this.contexts[i]&&this.contexts[i].viewport&&this.contexts[i].viewport(0,0,this.width*this.settings("webglOversamplingRatio"),this.height*this.settings("webglOversamplingRatio"));return this},sigma.renderers.webgl.prototype.clear=function(){return this.contexts.labels.clearRect(0,0,this.width,this.height),this.contexts.nodes.clear(this.contexts.nodes.COLOR_BUFFER_BIT),this.contexts.edges.clear(this.contexts.edges.COLOR_BUFFER_BIT),this},sigma.renderers.webgl.prototype.kill=function(){for(var e,t;t=this.captors.pop();)t.kill();for(e in delete this.captors,this.domElements)this.domElements[e].parentNode.removeChild(this.domElements[e]),delete this.domElements[e],delete this.contexts[e];delete this.domElements,delete this.contexts},sigma.utils.pkg("sigma.webgl.nodes"),sigma.utils.pkg("sigma.webgl.edges"),sigma.utils.pkg("sigma.canvas.labels")}.call(this),function(p){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";if("undefined"==typeof conrad)throw"conrad is not declared";sigma.utils.pkg("sigma.renderers"),sigma.renderers.svg=function(e,t,i,s){if("object"!=typeof s)throw"sigma.renderers.svg: Wrong arguments.";if(!(s.container instanceof HTMLElement))throw"Container not found.";var r,o,a,n,l=this;for(sigma.classes.dispatcher.extend(this),this.graph=e,this.camera=t,this.domElements={graph:null,groups:{},nodes:{},edges:{},labels:{},hovers:{}},this.measurementCanvas=null,this.options=s,this.container=this.options.container,this.settings="object"==typeof s.settings&&s.settings?i.embedObjects(s.settings):i,this.settings("freeStyle",!!this.options.freeStyle),this.settings("xmlns","http://www.w3.org/2000/svg"),this.nodesOnScreen=[],this.edgesOnScreen=[],this.options.prefix="renderer"+sigma.utils.id()+":",this.initDOM("svg"),this.captors=[],r=0,o=(a=this.options.captors||[sigma.captors.mouse,sigma.captors.touch]).length;r<o;r++)n="function"==typeof a[r]?a[r]:sigma.captors[a[r]],this.captors.push(new n(this.domElements.graph,this.camera,this.settings));window.addEventListener("resize",function(){l.resize()}),sigma.misc.bindDOMEvents.call(this,this.domElements.graph),this.bindHovers(this.options.prefix),this.resize(!1)},sigma.renderers.svg.prototype.render=function(e){var t,i,s,r,o,a,n,l,d,h={},g=this.graph,c=this.graph.nodes,u=(this.options.prefix,this.settings(e=e||{},"drawEdges")),m=this.settings(e,"drawNodes"),f=(this.settings(e,"drawLabels"),this.settings.embedObjects(e,{prefix:this.options.prefix,forceLabels:this.options.forceLabels}));for(this.settings(e,"hideEdgesOnMove")&&(this.camera.isAnimated||this.camera.isMoving)&&(u=!1),this.camera.applyView(p,this.options.prefix,{width:this.width,height:this.height}),this.hideDOMElements(this.domElements.nodes),this.hideDOMElements(this.domElements.edges),this.hideDOMElements(this.domElements.labels),this.edgesOnScreen=[],this.nodesOnScreen=this.camera.quadtree.area(this.camera.getRectangle(this.width,this.height)),i=0,r=(t=this.nodesOnScreen).length;i<r;i++)h[t[i].id]=t[i];for(i=0,r=(t=g.edges()).length;i<r;i++)!h[(o=t[i]).source]&&!h[o.target]||o.hidden||c(o.source).hidden||c(o.target).hidden||this.edgesOnScreen.push(o);if(l=sigma.svg.nodes,d=sigma.svg.labels,m)for(i=0,r=(t=this.nodesOnScreen).length;i<r;i++)t[i].hidden||this.domElements.nodes[t[i].id]||(s=(l[t[i].type]||l.def).create(t[i],f),this.domElements.nodes[t[i].id]=s,this.domElements.groups.nodes.appendChild(s),s=(d[t[i].type]||d.def).create(t[i],f),this.domElements.labels[t[i].id]=s,this.domElements.groups.labels.appendChild(s));if(m)for(i=0,r=(t=this.nodesOnScreen).length;i<r;i++)t[i].hidden||((l[t[i].type]||l.def).update(t[i],this.domElements.nodes[t[i].id],f),(d[t[i].type]||d.def).update(t[i],this.domElements.labels[t[i].id],f));if(l=sigma.svg.edges,u)for(i=0,r=(t=this.edgesOnScreen).length;i<r;i++)this.domElements.edges[t[i].id]||(a=c(t[i].source),n=c(t[i].target),s=(l[t[i].type]||l.def).create(t[i],a,n,f),this.domElements.edges[t[i].id]=s,this.domElements.groups.edges.appendChild(s));if(u)for(i=0,r=(t=this.edgesOnScreen).length;i<r;i++)a=c(t[i].source),n=c(t[i].target),(l[t[i].type]||l.def).update(t[i],this.domElements.edges[t[i].id],a,n,f);return this.dispatchEvent("render"),this},sigma.renderers.svg.prototype.initDOM=function(e){var t,i=document.createElementNS(this.settings("xmlns"),e),s=this.settings("classPrefix");i.style.position="absolute",i.setAttribute("class",s+"-svg"),i.setAttribute("xmlns",this.settings("xmlns")),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1");e=document.createElement("canvas");e.setAttribute("class",s+"-measurement-canvas"),this.domElements.graph=this.container.appendChild(i);for(var r=["edges","nodes","labels","hovers"],o=0,a=r.length;o<a;o++)(t=document.createElementNS(this.settings("xmlns"),"g")).setAttributeNS(null,"id",s+"-group-"+r[o]),t.setAttributeNS(null,"class",s+"-group"),this.domElements.groups[r[o]]=this.domElements.graph.appendChild(t);this.container.appendChild(e),this.measurementCanvas=e.getContext("2d")},sigma.renderers.svg.prototype.hideDOMElements=function(e){var t,i;for(i in e)t=e[i],sigma.svg.utils.hide(t);return this},sigma.renderers.svg.prototype.bindHovers=function(i){var s,r=sigma.svg.hovers,o=this;this.bind("overNode",function(e){var t=e.data.node;(e=o.settings.embedObjects({prefix:i}))("enableHovering")&&(e=(r[t.type]||r.def).create(t,o.domElements.nodes[t.id],o.measurementCanvas,e),o.domElements.hovers[t.id]=e,o.domElements.groups.hovers.appendChild(e),s=t)}),this.bind("outNode",function(e){e=e.data.node,o.settings.embedObjects({prefix:i})("enableHovering")&&(o.domElements.groups.hovers.removeChild(o.domElements.hovers[e.id]),s=null,delete o.domElements.hovers[e.id],o.domElements.groups.nodes.appendChild(o.domElements.nodes[e.id]))}),this.bind("render",function(){var e;s&&(e=o.settings.embedObjects({prefix:i}),o.domElements.groups.hovers.removeChild(o.domElements.hovers[s.id]),delete o.domElements.hovers[s.id],e=(r[s.type]||r.def).create(s,o.domElements.nodes[s.id],o.measurementCanvas,e),o.domElements.hovers[s.id]=e,o.domElements.groups.hovers.appendChild(e))})},sigma.renderers.svg.prototype.resize=function(e,t){var i=this.width,s=this.height;return e!==p&&t!==p?(this.width=e,this.height=t):(this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,e=this.width,t=this.height),i===this.width&&s===this.height||(this.domElements.graph.style.width=e+"px",this.domElements.graph.style.height=t+"px","svg"===this.domElements.graph.tagName.toLowerCase()&&(this.domElements.graph.setAttribute("width",+e),this.domElements.graph.setAttribute("height",+t))),this},sigma.utils.pkg("sigma.svg.nodes"),sigma.utils.pkg("sigma.svg.edges"),sigma.utils.pkg("sigma.svg.labels")}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.renderers");var t=!!e.WebGLRenderingContext;if(t){e=document.createElement("canvas");try{t=!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){t=!1}}sigma.renderers.def=t?sigma.renderers.webgl:sigma.renderers.canvas}(this),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.def={POINTS:3,ATTRIBUTES:5,addNode:function(e,t,i,s,r){r=sigma.utils.floatColor(e.color||r("defaultNodeColor"));t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=r,t[i++]=0,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=r,t[i++]=2*Math.PI/3,t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=r,t[i++]=4*Math.PI/3},render:function(e,t,i,s){var r=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),n=e.getAttribLocation(t,"a_angle"),l=e.getUniformLocation(t,"u_resolution"),d=e.getUniformLocation(t,"u_matrix"),h=e.getUniformLocation(t,"u_ratio"),g=e.getUniformLocation(t,"u_scale"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(l,s.width,s.height),e.uniform1f(h,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(g,s.scalingRatio),e.uniformMatrix3fv(d,!1,s.matrix),e.enableVertexAttribArray(r),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.vertexAttribPointer(r,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","attribute float a_angle;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","varying vec2 center;","varying float radius;","void main() {","radius = a_size * u_ratio;","vec2 position = (u_matrix * vec3(a_position, 1)).xy;","center = position * u_scale;","center = vec2(center.x, u_scale * u_resolution.y - center.y);","position = position +","2.0 * radius * vec2(cos(a_angle), sin(a_angle));","position = (position / u_resolution * 2.0 - 1.0) * vec2(1, -1);","radius = radius * u_scale;","gl_Position = vec4(position, 0, 1);","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","varying vec2 center;","varying float radius;","void main(void) {","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_FragCoord.xy - center;","float diff = radius - sqrt(m.x * m.x + m.y * m.y);","if (diff > 0.0)","gl_FragColor = color;","else","gl_FragColor = color0;","}"].join("\n"),e.FRAGMENT_SHADER);return sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.nodes"),sigma.webgl.nodes.fast={POINTS:1,ATTRIBUTES:4,addNode:function(e,t,i,s,r){t[i++]=e[s+"x"],t[i++]=e[s+"y"],t[i++]=e[s+"size"],t[i++]=sigma.utils.floatColor(e.color||r("defaultNodeColor"))},render:function(e,t,i,s){var r=e.getAttribLocation(t,"a_position"),o=e.getAttribLocation(t,"a_size"),a=e.getAttribLocation(t,"a_color"),n=e.getUniformLocation(t,"u_resolution"),l=e.getUniformLocation(t,"u_matrix"),d=e.getUniformLocation(t,"u_ratio"),h=e.getUniformLocation(t,"u_scale"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(n,s.width,s.height),e.uniform1f(d,1/Math.pow(s.ratio,s.settings("nodesPowRatio"))),e.uniform1f(h,s.scalingRatio),e.uniformMatrix3fv(l,!1,s.matrix),e.enableVertexAttribArray(r),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.vertexAttribPointer(r,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,12),e.drawArrays(e.POINTS,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_size;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","gl_PointSize = a_size * u_ratio * u_scale * 2.0;","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","float border = 0.01;","float radius = 0.5;","vec4 color0 = vec4(0.0, 0.0, 0.0, 0.0);","vec2 m = gl_PointCoord - vec2(0.5, 0.5);","float dist = radius - sqrt(m.x * m.x + m.y * m.y);","float t = 0.0;","if (dist > border)","t = 1.0;","else if (dist > 0.0)","t = dist / border;","gl_FragColor = mix(color0, color, t);","}"].join("\n"),e.FRAGMENT_SHADER);return sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.def={POINTS:6,ATTRIBUTES:7,addEdge:function(e,t,i,s,r,o,a){var n=(e[o+"size"]||1)/2,l=t[o+"x"],d=t[o+"y"],h=i[o+"x"],o=i[o+"y"],g=e.color;if(!g)switch(a("edgeColor")){case"source":g=t.color||a("defaultNodeColor");break;case"target":g=i.color||a("defaultNodeColor");break;default:g=a("defaultEdgeColor")}g=sigma.utils.floatColor(g),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=o,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=o,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=1,s[r++]=g,s[r++]=h,s[r++]=o,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=h,s[r++]=o,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=0,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=o,s[r++]=n,s[r++]=1,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=o,s[r++]=n,s[r++]=0,s[r++]=g},render:function(e,t,i,s){var r=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position1"),a=e.getAttribLocation(t,"a_position2"),n=e.getAttribLocation(t,"a_thickness"),l=e.getAttribLocation(t,"a_minus"),d=e.getUniformLocation(t,"u_resolution"),h=e.getUniformLocation(t,"u_matrix"),g=e.getUniformLocation(t,"u_matrixHalfPi"),c=e.getUniformLocation(t,"u_matrixHalfPiMinus"),u=e.getUniformLocation(t,"u_ratio"),m=e.getUniformLocation(t,"u_scale"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(d,s.width,s.height),e.uniform1f(u,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(m,s.scalingRatio),e.uniformMatrix3fv(h,!1,s.matrix),e.uniformMatrix2fv(g,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(c,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(r),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(a,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(r,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t=sigma.utils.loadShader(e,["attribute vec2 a_position1;","attribute vec2 a_position2;","attribute float a_thickness;","attribute float a_minus;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 position = a_thickness * u_ratio *","normalize(a_position2 - a_position1);","mat2 matrix = a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi;","position = matrix * position + a_position1;","gl_Position = vec4(","((u_matrix * vec3(position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER);return sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.fast={POINTS:2,ATTRIBUTES:3,addEdge:function(e,t,i,s,r,o,a){e[o+"size"];var n=t[o+"x"],l=t[o+"y"],d=i[o+"x"],o=i[o+"y"],h=e.color;if(!h)switch(a("edgeColor")){case"source":h=t.color||a("defaultNodeColor");break;case"target":h=i.color||a("defaultNodeColor");break;default:h=a("defaultEdgeColor")}h=sigma.utils.floatColor(h),s[r++]=n,s[r++]=l,s[r++]=h,s[r++]=d,s[r++]=o,s[r++]=h},render:function(e,t,i,s){var r=e.getAttribLocation(t,"a_color"),o=e.getAttribLocation(t,"a_position"),a=e.getUniformLocation(t,"u_resolution"),n=e.getUniformLocation(t,"u_matrix"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform2f(a,s.width,s.height),e.uniformMatrix3fv(n,!1,s.matrix),e.enableVertexAttribArray(o),e.enableVertexAttribArray(r),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(r,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.lineWidth(3),e.drawArrays(e.LINES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t=sigma.utils.loadShader(e,["attribute vec2 a_position;","attribute float a_color;","uniform vec2 u_resolution;","uniform mat3 u_matrix;","varying vec4 color;","void main() {","gl_Position = vec4(","((u_matrix * vec3(a_position, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER);return sigma.utils.loadProgram(e,[t,i])}}}(),function(){"use strict";sigma.utils.pkg("sigma.webgl.edges"),sigma.webgl.edges.arrow={POINTS:9,ATTRIBUTES:11,addEdge:function(e,t,i,s,r,o,a){var n=(e[o+"size"]||1)/2,l=t[o+"x"],d=t[o+"y"],h=i[o+"x"],g=i[o+"y"],o=i[o+"size"],c=e.color;if(!c)switch(a("edgeColor")){case"source":c=t.color||a("defaultNodeColor");break;case"target":c=i.color||a("defaultNodeColor");break;default:c=a("defaultEdgeColor")}c=sigma.utils.floatColor(c),s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=g,s[r++]=n,s[r++]=o,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=g,s[r++]=n,s[r++]=o,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=l,s[r++]=d,s[r++]=h,s[r++]=g,s[r++]=n,s[r++]=o,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=-1,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=0,s[r++]=c,s[r++]=h,s[r++]=g,s[r++]=l,s[r++]=d,s[r++]=n,s[r++]=o,s[r++]=1,s[r++]=0,s[r++]=1,s[r++]=1,s[r++]=c},render:function(e,t,i,s){var r=e.getAttribLocation(t,"a_pos1"),o=e.getAttribLocation(t,"a_pos2"),a=e.getAttribLocation(t,"a_thickness"),n=e.getAttribLocation(t,"a_tSize"),l=e.getAttribLocation(t,"a_delay"),d=e.getAttribLocation(t,"a_minus"),h=e.getAttribLocation(t,"a_head"),g=e.getAttribLocation(t,"a_headPosition"),c=e.getAttribLocation(t,"a_color"),u=e.getUniformLocation(t,"u_resolution"),m=e.getUniformLocation(t,"u_matrix"),f=e.getUniformLocation(t,"u_matrixHalfPi"),p=e.getUniformLocation(t,"u_matrixHalfPiMinus"),y=e.getUniformLocation(t,"u_ratio"),x=e.getUniformLocation(t,"u_nodeRatio"),b=e.getUniformLocation(t,"u_arrowHead"),v=e.getUniformLocation(t,"u_scale"),t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,i,e.STATIC_DRAW),e.uniform2f(u,s.width,s.height),e.uniform1f(y,s.ratio/Math.pow(s.ratio,s.settings("edgesPowRatio"))),e.uniform1f(x,Math.pow(s.ratio,s.settings("nodesPowRatio"))/s.ratio),e.uniform1f(b,5),e.uniform1f(v,s.scalingRatio),e.uniformMatrix3fv(m,!1,s.matrix),e.uniformMatrix2fv(f,!1,sigma.utils.matrices.rotation(Math.PI/2,!0)),e.uniformMatrix2fv(p,!1,sigma.utils.matrices.rotation(-Math.PI/2,!0)),e.enableVertexAttribArray(r),e.enableVertexAttribArray(o),e.enableVertexAttribArray(a),e.enableVertexAttribArray(n),e.enableVertexAttribArray(l),e.enableVertexAttribArray(d),e.enableVertexAttribArray(h),e.enableVertexAttribArray(g),e.enableVertexAttribArray(c),e.vertexAttribPointer(r,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,0),e.vertexAttribPointer(o,2,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,8),e.vertexAttribPointer(a,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,16),e.vertexAttribPointer(n,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,20),e.vertexAttribPointer(l,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,24),e.vertexAttribPointer(d,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,28),e.vertexAttribPointer(h,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,32),e.vertexAttribPointer(g,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,36),e.vertexAttribPointer(c,1,e.FLOAT,!1,this.ATTRIBUTES*Float32Array.BYTES_PER_ELEMENT,40),e.drawArrays(e.TRIANGLES,s.start||0,s.count||i.length/this.ATTRIBUTES)},initProgram:function(e){var t=sigma.utils.loadShader(e,["attribute vec2 a_pos1;","attribute vec2 a_pos2;","attribute float a_thickness;","attribute float a_tSize;","attribute float a_delay;","attribute float a_minus;","attribute float a_head;","attribute float a_headPosition;","attribute float a_color;","uniform vec2 u_resolution;","uniform float u_ratio;","uniform float u_nodeRatio;","uniform float u_arrowHead;","uniform float u_scale;","uniform mat3 u_matrix;","uniform mat2 u_matrixHalfPi;","uniform mat2 u_matrixHalfPiMinus;","varying vec4 color;","void main() {","vec2 pos = normalize(a_pos2 - a_pos1);","mat2 matrix = (1.0 - a_head) *","(","a_minus * u_matrixHalfPiMinus +","(1.0 - a_minus) * u_matrixHalfPi",") + a_head * (","a_headPosition * u_matrixHalfPiMinus * 0.6 +","(a_headPosition * a_headPosition - 1.0) * mat2(1.0)",");","pos = a_pos1 + (","(1.0 - a_head) * a_thickness * u_ratio * matrix * pos +","a_head * u_arrowHead * a_thickness * u_ratio * matrix * pos +","a_delay * pos * (","a_tSize / u_nodeRatio +","u_arrowHead * a_thickness * u_ratio",")",");","gl_Position = vec4(","((u_matrix * vec3(pos, 1)).xy /","u_resolution * 2.0 - 1.0) * vec2(1, -1),","0,","1",");","float c = a_color;","color.b = mod(c, 256.0); c = floor(c / 256.0);","color.g = mod(c, 256.0); c = floor(c / 256.0);","color.r = mod(c, 256.0); c = floor(c / 256.0); color /= 255.0;","color.a = 1.0;","}"].join("\n"),e.VERTEX_SHADER),i=sigma.utils.loadShader(e,["precision mediump float;","varying vec4 color;","void main(void) {","gl_FragColor = color;","}"].join("\n"),e.FRAGMENT_SHADER);return sigma.utils.loadProgram(e,[t,i])}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.labels"),sigma.canvas.labels.def=function(e,t,i){var s,r=i("prefix")||"",o=e[r+"size"];o<i("labelThreshold")||e.label&&"string"==typeof e.label&&(s="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*o,t.font=(i("fontStyle")?i("fontStyle")+" ":"")+s+"px "+i("font"),t.fillStyle="node"===i("labelColor")?e.color||i("defaultNodeColor"):i("defaultLabelColor"),t.fillText(e.label,Math.round(e[r+"x"]+o+3),Math.round(e[r+"y"]+s/3)))}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.hovers"),sigma.canvas.hovers.def=function(e,t,i){var s,r,o,a,n=i("hoverFontStyle")||i("fontStyle"),l=i("prefix")||"",d=e[l+"size"],h="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*d;t.font=(n?n+" ":"")+h+"px "+(i("hoverFont")||i("font")),t.beginPath(),t.fillStyle="node"===i("labelHoverBGColor")?e.color||i("defaultNodeColor"):i("defaultHoverLabelBGColor"),e.label&&i("labelHoverShadow")&&(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=8,t.shadowColor=i("labelHoverShadowColor")),e.label&&"string"==typeof e.label&&(s=Math.round(e[l+"x"]-h/2-2),r=Math.round(e[l+"y"]-h/2-2),o=Math.round(t.measureText(e.label).width+h/2+d+7),a=Math.round(h+4),n=Math.round(h/2+2),t.moveTo(s,r+n),t.arcTo(s,r,s+n,r,n),t.lineTo(s+o,r),t.lineTo(s+o,r+a),t.lineTo(s+n,r+a),t.arcTo(s,r+a,s,r+a-n,n),t.lineTo(s,r+n),t.closePath(),t.fill(),t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),0<i("borderSize")&&(t.beginPath(),t.fillStyle="node"===i("nodeBorderColor")?e.color||i("defaultNodeColor"):i("defaultNodeBorderColor"),t.arc(e[l+"x"],e[l+"y"],d+i("borderSize"),0,2*Math.PI,!0),t.closePath(),t.fill()),(sigma.canvas.nodes[e.type]||sigma.canvas.nodes.def)(e,t,i),e.label&&"string"==typeof e.label&&(t.fillStyle="node"===i("labelHoverColor")?e.color||i("defaultNodeColor"):i("defaultLabelHoverColor"),t.fillText(e.label,Math.round(e[l+"x"]+d+3),Math.round(e[l+"y"]+h/3)))}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.canvas.nodes"),sigma.canvas.nodes.def=function(e,t,i){var s=i("prefix")||"";t.fillStyle=e.color||i("defaultNodeColor"),t.beginPath(),t.arc(e[s+"x"],e[s+"y"],e[s+"size"],0,2*Math.PI,!0),t.closePath(),t.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.def=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=e[a+"size"]||1,e=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor");if(!o)switch(e){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=d}s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edges"),sigma.canvas.edges.arrow=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,g=i[a+"size"],c=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],e=Math.max(2.5*h,r("minArrowSize")),a=Math.sqrt(Math.pow(m-c,2)+Math.pow(f-u,2)),r=c+(m-c)*(a-e-g)/a,g=u+(f-u)*(a-e-g)/a,m=(m-c)*e/a,a=(f-u)*e/a;if(!o)switch(n){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=d}s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(c,u),s.lineTo(r,g),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(r+m,g+a),s.lineTo(r+.6*a,g-.6*m),s.lineTo(r-.6*a,g+.6*m),s.lineTo(r+m,g+a),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.def=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=e[a+"size"]||1,l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor");if(!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,n*=r("edgeHoverSizeRatio"),s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(t[a+"x"],t[a+"y"]),s.lineTo(i[a+"x"],i[a+"y"]),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curve=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=r("edgeHoverSizeRatio")*(e[a+"size"]||1),l=r("edgeColor"),d=r("defaultNodeColor"),h=r("defaultEdgeColor"),g=t[a+"size"],c=t[a+"x"],u=t[a+"y"],m=i[a+"x"],a=i[a+"y"],f=t.id===i.id?sigma.utils.getSelfLoopControlPoints(c,u,g):sigma.utils.getQuadraticControlPoint(c,u,m,a);if(!o)switch(l){case"source":o=t.color||d;break;case"target":o=i.color||d;break;default:o=h}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=n,s.beginPath(),s.moveTo(c,u),t.id===i.id?s.bezierCurveTo(f.x1,f.y1,f.x2,f.y2,m,a):s.quadraticCurveTo(f.x,f.y,m,a),s.stroke()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.arrow=function(e,t,i,s,r){var o=e.color,a=r("prefix")||"",n=r("edgeColor"),l=r("defaultNodeColor"),d=r("defaultEdgeColor"),h=e[a+"size"]||1,g=i[a+"size"],c=t[a+"x"],u=t[a+"y"],m=i[a+"x"],f=i[a+"y"],p=2.5*(h=e.hover?r("edgeHoverSizeRatio")*h:h),y=Math.sqrt(Math.pow(m-c,2)+Math.pow(f-u,2)),a=c+(m-c)*(y-p-g)/y,g=u+(f-u)*(y-p-g)/y,m=(m-c)*p/y,y=(f-u)*p/y;if(!o)switch(n){case"source":o=t.color||l;break;case"target":o=i.color||l;break;default:o=d}o="edge"===r("edgeHoverColor")?e.hover_color||o:e.hover_color||r("defaultEdgeHoverColor")||o,s.strokeStyle=o,s.lineWidth=h,s.beginPath(),s.moveTo(c,u),s.lineTo(a,g),s.stroke(),s.fillStyle=o,s.beginPath(),s.moveTo(a+m,g+y),s.lineTo(a+.6*y,g-.6*m),s.lineTo(a-.6*y,g+.6*m),s.lineTo(a+m,g+y),s.closePath(),s.fill()}}(),function(){"use strict";sigma.utils.pkg("sigma.canvas.edgehovers"),sigma.canvas.edgehovers.curvedArrow=function(e,t,i,s,r){var o,a,n,l,d=e.color,h=r("prefix")||"",g=r("edgeColor"),c=r("defaultNodeColor"),u=r("defaultEdgeColor"),m=r("edgeHoverSizeRatio")*(e[h+"size"]||1),f=i[h+"size"],p=t[h+"x"],y=t[h+"y"],x=i[h+"x"],h=i[h+"y"],b=t.id===i.id?sigma.utils.getSelfLoopControlPoints(p,y,f):sigma.utils.getQuadraticControlPoint(p,y,x,h),v=t.id===i.id?(v=Math.sqrt(Math.pow(x-b.x1,2)+Math.pow(h-b.y1,2)),a=b.x1+(x-b.x1)*(v-(o=2.5*m)-f)/v,n=b.y1+(h-b.y1)*(v-o-f)/v,l=(x-b.x1)*o/v,(h-b.y1)*o/v):(v=Math.sqrt(Math.pow(x-b.x,2)+Math.pow(h-b.y,2)),a=b.x+(x-b.x)*(v-(o=2.5*m)-f)/v,n=b.y+(h-b.y)*(v-o-f)/v,l=(x-b.x)*o/v,(h-b.y)*o/v);if(!d)switch(g){case"source":d=t.color||c;break;case"target":d=i.color||c;break;default:d=u}d="edge"===r("edgeHoverColor")?e.hover_color||d:e.hover_color||r("defaultEdgeHoverColor")||d,s.strokeStyle=d,s.lineWidth=m,s.beginPath(),s.moveTo(p,y),t.id===i.id?s.bezierCurveTo(b.x2,b.y2,b.x1,b.y1,a,n):s.quadraticCurveTo(b.x,b.y,a,n),s.stroke(),s.fillStyle=d,s.beginPath(),s.moveTo(a+l,n+v),s.lineTo(a+.6*v,n-.6*l),s.lineTo(a-.6*v,n+.6*l),s.lineTo(a+l,n+v),s.closePath(),s.fill()}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.canvas.extremities"),sigma.canvas.extremities.def=function(e,t,i,s,r){(sigma.canvas.hovers[t.type]||sigma.canvas.hovers.def)(t,s,r),(sigma.canvas.hovers[i.type]||sigma.canvas.hovers.def)(i,s,r)}}.call(this),function(){"use strict";sigma.utils.pkg("sigma.svg.utils"),sigma.svg.utils={show:function(e){return e.style.display="",this},hide:function(e){return e.style.display="none",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.nodes"),sigma.svg.nodes.def={create:function(e,t){t("prefix");var i=document.createElementNS(t("xmlns"),"circle");return i.setAttributeNS(null,"data-node-id",e.id),i.setAttributeNS(null,"class",t("classPrefix")+"-node"),i.setAttributeNS(null,"fill",e.color||t("defaultNodeColor")),i},update:function(e,t,i){var s=i("prefix")||"";return t.setAttributeNS(null,"cx",e[s+"x"]),t.setAttributeNS(null,"cy",e[s+"y"]),t.setAttributeNS(null,"r",e[s+"size"]),i("freeStyle")||t.setAttributeNS(null,"fill",e.color||i("defaultNodeColor")),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.def={create:function(e,t,i,s){var r=e.color,o=(s("prefix"),s("edgeColor")),a=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=n}o=document.createElementNS(s("xmlns"),"line");return o.setAttributeNS(null,"data-edge-id",e.id),o.setAttributeNS(null,"class",s("classPrefix")+"-edge"),o.setAttributeNS(null,"stroke",r),o},update:function(e,t,i,s,r){r=r("prefix")||"";return t.setAttributeNS(null,"stroke-width",e[r+"size"]||1),t.setAttributeNS(null,"x1",i[r+"x"]),t.setAttributeNS(null,"y1",i[r+"y"]),t.setAttributeNS(null,"x2",s[r+"x"]),t.setAttributeNS(null,"y2",s[r+"y"]),t.style.display="",this}}}(),function(){"use strict";sigma.utils.pkg("sigma.svg.edges"),sigma.svg.edges.curve={create:function(e,t,i,s){var r=e.color,o=(s("prefix"),s("edgeColor")),a=s("defaultNodeColor"),n=s("defaultEdgeColor");if(!r)switch(o){case"source":r=t.color||a;break;case"target":r=i.color||a;break;default:r=n}o=document.createElementNS(s("xmlns"),"path");return o.setAttributeNS(null,"data-edge-id",e.id),o.setAttributeNS(null,"class",s("classPrefix")+"-edge"),o.setAttributeNS(null,"stroke",r),o},update:function(e,t,i,s,r){var o=r("prefix")||"";t.setAttributeNS(null,"stroke-width",e[o+"size"]||1);r=(i[o+"x"]+s[o+"x"])/2+(s[o+"y"]-i[o+"y"])/4,e=(i[o+"y"]+s[o+"y"])/2+(i[o+"x"]-s[o+"x"])/4,o="M"+i[o+"x"]+","+i[o+"y"]+" Q"+r+","+e+" "+s[o+"x"]+","+s[o+"y"];return t.setAttributeNS(null,"d",o),t.setAttributeNS(null,"fill","none"),t.style.display="",this}}}(),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.labels"),sigma.svg.labels.def={create:function(e,t){var i=e[(t("prefix")||"")+"size"],s=document.createElementNS(t("xmlns"),"text"),r="fixed"===t("labelSize")?t("defaultLabelSize"):t("labelSizeRatio")*i,i="node"===t("labelColor")?e.color||t("defaultNodeColor"):t("defaultLabelColor");return s.setAttributeNS(null,"data-label-target",e.id),s.setAttributeNS(null,"class",t("classPrefix")+"-label"),s.setAttributeNS(null,"font-size",r),s.setAttributeNS(null,"font-family",t("font")),s.setAttributeNS(null,"fill",i),s.innerHTML=e.label,s.textContent=e.label,s},update:function(e,t,i){var s=i("prefix")||"",r=e[s+"size"],o="fixed"===i("labelSize")?i("defaultLabelSize"):i("labelSizeRatio")*r;if((i("forceLabels")||!(r<i("labelThreshold")))&&"string"==typeof e.label)return t.setAttributeNS(null,"x",Math.round(e[s+"x"]+r+3)),t.setAttributeNS(null,"y",Math.round(e[s+"y"]+o/3)),t.style.display="",this}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.svg.hovers"),sigma.svg.hovers.def={create:function(e,t,i,s){s("hoverFontStyle")||s("fontStyle");var r=s("prefix")||"",o=e[r+"size"],a="fixed"===s("labelSize")?s("defaultLabelSize"):s("labelSizeRatio")*o,n="node"===s("labelHoverColor")?e.color||s("defaultNodeColor"):s("defaultLabelHoverColor"),l=document.createElementNS(s("xmlns"),"g"),d=document.createElementNS(s("xmlns"),"rect"),h=document.createElementNS(s("xmlns"),"circle"),g=document.createElementNS(s("xmlns"),"text");return l.setAttributeNS(null,"class",s("classPrefix")+"-hover"),l.setAttributeNS(null,"data-node-id",e.id),"string"==typeof e.label&&(g.innerHTML=e.label,g.textContent=e.label,g.setAttributeNS(null,"class",s("classPrefix")+"-hover-label"),g.setAttributeNS(null,"font-size",a),g.setAttributeNS(null,"font-family",s("font")),g.setAttributeNS(null,"fill",n),g.setAttributeNS(null,"x",Math.round(e[r+"x"]+o+3)),g.setAttributeNS(null,"y",Math.round(e[r+"y"]+a/3)),Math.round(e[r+"x"]-a/2-2),Math.round(e[r+"y"]-a/2-2),i=Math.round(i.measureText(e.label).width+a/2+o+9),o=Math.round(a+4),a=Math.round(a/2+2),h.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),h.setAttributeNS(null,"fill","#fff"),h.setAttributeNS(null,"cx",e[r+"x"]),h.setAttributeNS(null,"cy",e[r+"y"]),h.setAttributeNS(null,"r",a),d.setAttributeNS(null,"class",s("classPrefix")+"-hover-area"),d.setAttributeNS(null,"fill","#fff"),d.setAttributeNS(null,"x",e[r+"x"]+a/4),d.setAttributeNS(null,"y",e[r+"y"]-a),d.setAttributeNS(null,"width",i),d.setAttributeNS(null,"height",o)),l.appendChild(h),l.appendChild(d),l.appendChild(g),l.appendChild(t),l}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.utils.pkg("sigma.utils"),sigma.middlewares.rescale=function(e,t,i){for(var s,r,o,a,n=this.graph.nodes(),l=this.graph.edges(),d=this.settings.embedObjects(i||{}),h=d("bounds")||sigma.utils.getBoundaries(this.graph,e,!0),g=h.minX,c=h.minY,u=h.maxX,m=h.maxY,f=h.sizeMax,p=h.weightMax,y=d("width")||1,i=d("height")||1,x=d("autoRescale"),b={nodePosition:1,nodeSize:1,edgeSize:1},v=0,E=(x=!(x instanceof Array)?["nodePosition","nodeSize","edgeSize"]:x).length;v<E;v++)if(!b[x[v]])throw new Error('The rescale setting "'+x[v]+'" is not recognized.');var w=~x.indexOf("nodePosition"),A=~x.indexOf("nodeSize"),T=~x.indexOf("edgeSize"),S="outside"===d("scalingMode")?Math.max(y/Math.max(u-g,1),i/Math.max(m-c,1)):Math.min(y/Math.max(u-g,1),i/Math.max(m-c,1));for(u+=h=(d("rescaleIgnoreSize")?0:(d("maxNodeSize")||f)/S)+(d("sideMargin")||0),g-=h,m+=h,c-=h,S="outside"===d("scalingMode")?Math.max(y/Math.max(u-g,1),i/Math.max(m-c,1)):Math.min(y/Math.max(u-g,1),i/Math.max(m-c,1)),r=d("maxNodeSize")||d("minNodeSize")?d("maxNodeSize")===d("minNodeSize")?(s=0,+d("maxNodeSize")):(s=(d("maxNodeSize")-d("minNodeSize"))/f,+d("minNodeSize")):(s=1,0),a=d("maxEdgeSize")||d("minEdgeSize")?(o=d("maxEdgeSize")===d("minEdgeSize")?0:(d("maxEdgeSize")-d("minEdgeSize"))/p,+d("minEdgeSize")):(o=1,0),v=0,E=l.length;v<E;v++)l[v][t+"size"]=l[v][e+"size"]*(T?o:1)+(T?a:0);for(v=0,E=n.length;v<E;v++)n[v][t+"size"]=n[v][e+"size"]*(A?s:1)+(A?r:0),n[v][t+"x"]=(n[v][e+"x"]-(u+g)/2)*(w?S:1),n[v][t+"y"]=(n[v][e+"y"]-(m+c)/2)*(w?S:1)},sigma.utils.getBoundaries=function(e,t,i){var s,r,o=e.edges(),a=e.nodes(),n=-1/0,l=-1/0,d=1/0,h=1/0,g=-1/0,c=-1/0;if(i)for(s=0,r=o.length;s<r;s++)n=Math.max(o[s][t+"size"],n);for(s=0,r=a.length;s<r;s++)l=Math.max(a[s][t+"size"],l),g=Math.max(a[s][t+"x"],g),d=Math.min(a[s][t+"x"],d),c=Math.max(a[s][t+"y"],c),h=Math.min(a[s][t+"y"],h);return{weightMax:n=n||1,sizeMax:l=l||1,minX:d,minY:h,maxX:g,maxY:c}}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.middlewares"),sigma.middlewares.copy=function(e,t){var i,s,r;if(t+""!=e+""){for(i=0,s=(r=this.graph.nodes()).length;i<s;i++)r[i][t+"x"]=r[i][e+"x"],r[i][t+"y"]=r[i][e+"y"],r[i][t+"size"]=r[i][e+"size"];for(i=0,s=(r=this.graph.edges()).length;i<s;i++)r[i][t+"size"]=r[i][e+"size"]}}}.call(this),function(h){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc.animation.running");var e,g=(e=0,function(){return""+ ++e});sigma.misc.animation.camera=function(t,i,e){if(!(t instanceof sigma.classes.camera&&"object"==typeof i&&i))throw"animation.camera: Wrong arguments.";if("number"!=typeof i.x&&"number"!=typeof i.y&&"number"!=typeof i.ratio&&"number"!=typeof i.angle)throw"There must be at least one valid coordinate in the given val.";var s=e||{},r=sigma.utils.dateNow(),o={x:t.x,y:t.y,ratio:t.ratio,angle:t.angle},a=(s.duration,"function"!=typeof s.easing?sigma.utils.easings[s.easing||"quadraticInOut"]:s.easing),n=function(){var e=s.duration?(sigma.utils.dateNow()-r)/s.duration:1;1<=e?(t.isAnimated=!1,t.goTo({x:(i.x!==h?i:o).x,y:(i.y!==h?i:o).y,ratio:(i.ratio!==h?i:o).ratio,angle:(i.angle!==h?i:o).angle}),cancelAnimationFrame(l),delete sigma.misc.animation.running[l],"function"==typeof s.onComplete&&s.onComplete()):(e=a(e),t.isAnimated=!0,t.goTo({x:i.x!==h?o.x+(i.x-o.x)*e:o.x,y:i.y!==h?o.y+(i.y-o.y)*e:o.y,ratio:i.ratio!==h?o.ratio+(i.ratio-o.ratio)*e:o.ratio,angle:i.angle!==h?o.angle+(i.angle-o.angle)*e:o.angle}),"function"==typeof s.onNewFrame&&s.onNewFrame(),d.frameId=requestAnimationFrame(n))},l=g(),d={frameId:requestAnimationFrame(n),target:t,type:"camera",options:s,fn:n};return sigma.misc.animation.running[l]=d,l},sigma.misc.animation.kill=function(e){if(1!==arguments.length||"number"!=typeof e)throw"animation.kill: Wrong arguments.";var t=sigma.misc.animation.running[e];return t&&(cancelAnimationFrame(e),delete sigma.misc.animation.running[t.frameId],"camera"===t.type&&(t.target.isAnimated=!1),"function"==typeof(t.options||{}).onComplete&&t.options.onComplete()),this},sigma.misc.animation.killAll=function(e){var t,i,s=0,r="string"==typeof e?e:null,o="object"==typeof e?e:null,a=sigma.misc.animation.running;for(i in a)r&&a[i].type!==r||o&&a[i].target!==o||(t=sigma.misc.animation.running[i],cancelAnimationFrame(t.frameId),delete sigma.misc.animation.running[i],"camera"===t.type&&(t.target.isAnimated=!1),s++,"function"==typeof(t.options||{}).onComplete&&t.options.onComplete());return s},sigma.misc.animation.has=function(e){var t,i="string"==typeof e?e:null,s="object"==typeof e?e:null,r=sigma.misc.animation.running;for(t in r)if(!(i&&r[t].type!==i||s&&r[t].target!==s))return!0;return!1}}.call(this),function(A){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindEvents=function(b){var e,t,v,E,w=this;function y(e){e&&(v="x"in e.data?e.data.x:v,E="y"in e.data?e.data.y:E);var t,i,s,r,o,a,n,l,d=[],h=v+w.width/2,g=E+w.height/2,e=w.camera.cameraPosition(v,E),c=w.camera.quadtree.point(e.x,e.y);if(c.length)for(t=0,s=c.length;t<s;t++)if(o=(r=c[t])[b+"x"],a=r[b+"y"],n=r[b+"size"],!r.hidden&&o-n<h&&h<o+n&&a-n<g&&g<a+n&&Math.sqrt(Math.pow(h-o,2)+Math.pow(g-a,2))<n){for(l=!1,i=0;i<d.length;i++)if(r.size>d[i].size){d.splice(i,0,r),l=!0;break}l||d.push(r)}return d}function x(e){if(!w.settings("enableEdgeHovering"))return[];var t=sigma.renderers.canvas&&w instanceof sigma.renderers.canvas;if(!t)throw new Error("The edge events feature is not compatible with the WebGL renderer");e&&(v="x"in e.data?e.data.x:v,E="y"in e.data?e.data.y:E);var i,s,r,o,a,n,l,d=w.settings("edgeHoverPrecision"),h={},g=[],c=v+w.width/2,u=E+w.height/2,e=w.camera.cameraPosition(v,E),m=[];if(t)for(var f,p=0,y=(f=w.camera.quadtree.area(w.camera.getRectangle(w.width,w.height))).length;p<y;p++)h[f[p].id]=f[p];function x(e,t){for(l=!1,i=0;i<e.length;i++)if(t.size>e[i].size){e.splice(i,0,t),l=!0;break}l||e.push(t)}if((m=w.camera.edgequadtree!==A?w.camera.edgequadtree.point(e.x,e.y):m).length)for(p=0,y=m.length;p<y;p++)s=m[p],o=w.graph.nodes(s.source),a=w.graph.nodes(s.target),r=s[b+"size"]||s["read_"+b+"size"],!s.hidden&&!o.hidden&&!a.hidden&&(!t||h[s.source]||h[s.target])&&sigma.utils.getDistance(o[b+"x"],o[b+"y"],c,u)>o[b+"size"]&&sigma.utils.getDistance(a[b+"x"],a[b+"y"],c,u)>a[b+"size"]&&("curve"==s.type||"curvedArrow"==s.type?o.id===a.id?(n=sigma.utils.getSelfLoopControlPoints(o[b+"x"],o[b+"y"],o[b+"size"]),sigma.utils.isPointOnBezierCurve(c,u,o[b+"x"],o[b+"y"],a[b+"x"],a[b+"y"],n.x1,n.y1,n.x2,n.y2,Math.max(r,d))&&x(g,s)):(n=sigma.utils.getQuadraticControlPoint(o[b+"x"],o[b+"y"],a[b+"x"],a[b+"y"]),sigma.utils.isPointOnQuadraticCurve(c,u,o[b+"x"],o[b+"y"],a[b+"x"],a[b+"y"],n.x,n.y,Math.max(r,d))&&x(g,s)):sigma.utils.isPointOnSegment(c,u,o[b+"x"],o[b+"y"],a[b+"x"],a[b+"y"],Math.max(r,d))&&x(g,s));return g}function i(e){var u,m,f={},p={};function t(e){if(w.settings("eventsEnabled")){u=y(e),m=x(e);for(var t,i,s,r=[],o=[],a={},n=u.length,l=[],d=[],h={},g=m.length,c=0;c<n;c++)a[(i=u[c]).id]=i,f[i.id]||(o.push(i),f[i.id]=i);for(t in f)a[t]||(r.push(f[t]),delete f[t]);for(c=0,n=o.length;c<n;c++)w.dispatchEvent("overNode",{node:o[c],captor:e.data});for(c=0,n=r.length;c<n;c++)w.dispatchEvent("outNode",{node:r[c],captor:e.data});for(o.length&&w.dispatchEvent("overNodes",{nodes:o,captor:e.data}),r.length&&w.dispatchEvent("outNodes",{nodes:r,captor:e.data}),c=0;c<g;c++)h[(s=m[c]).id]=s,p[s.id]||(d.push(s),p[s.id]=s);for(t in p)h[t]||(l.push(p[t]),delete p[t]);for(c=0,g=d.length;c<g;c++)w.dispatchEvent("overEdge",{edge:d[c],captor:e.data});for(c=0,g=l.length;c<g;c++)w.dispatchEvent("outEdge",{edge:l[c],captor:e.data});d.length&&w.dispatchEvent("overEdges",{edges:d,captor:e.data}),l.length&&w.dispatchEvent("outEdges",{edges:l,captor:e.data})}}e.bind("click",function(e){w.settings("eventsEnabled")&&(w.dispatchEvent("click",e.data),u=y(e),m=x(e),u.length?(w.dispatchEvent("clickNode",{node:u[0],captor:e.data}),w.dispatchEvent("clickNodes",{node:u,captor:e.data})):m.length?(w.dispatchEvent("clickEdge",{edge:m[0],captor:e.data}),w.dispatchEvent("clickEdges",{edge:m,captor:e.data})):w.dispatchEvent("clickStage",{captor:e.data}))}),e.bind("mousedown",t),e.bind("mouseup",t),e.bind("mousemove",t),e.bind("mouseout",function(e){if(w.settings("eventsEnabled")){var t,i,s,r,o=[],a=[];for(t in f)o.push(f[t]);for(f={},i=0,s=o.length;i<s;i++)w.dispatchEvent("outNode",{node:o[i],captor:e.data});for(o.length&&w.dispatchEvent("outNodes",{nodes:o,captor:e.data}),p={},i=0,r=a.length;i<r;i++)w.dispatchEvent("outEdge",{edge:a[i],captor:e.data});a.length&&w.dispatchEvent("outEdges",{edges:a,captor:e.data})}}),e.bind("doubleclick",function(e){w.settings("eventsEnabled")&&(w.dispatchEvent("doubleClick",e.data),u=y(e),m=x(e),u.length?(w.dispatchEvent("doubleClickNode",{node:u[0],captor:e.data}),w.dispatchEvent("doubleClickNodes",{node:u,captor:e.data})):m.length?(w.dispatchEvent("doubleClickEdge",{edge:m[0],captor:e.data}),w.dispatchEvent("doubleClickEdges",{edge:m,captor:e.data})):w.dispatchEvent("doubleClickStage",{captor:e.data}))}),e.bind("rightclick",function(e){w.settings("eventsEnabled")&&(w.dispatchEvent("rightClick",e.data),u=y(e),m=x(e),u.length?(w.dispatchEvent("rightClickNode",{node:u[0],captor:e.data}),w.dispatchEvent("rightClickNodes",{node:u,captor:e.data})):m.length?(w.dispatchEvent("rightClickEdge",{edge:m[0],captor:e.data}),w.dispatchEvent("rightClickEdges",{edge:m,captor:e.data})):w.dispatchEvent("rightClickStage",{captor:e.data}))}),w.bind("render",t)}for(e=0,t=this.captors.length;e<t;e++)i(this.captors[e])}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.bindDOMEvents=function(e){var i=this,s=this.graph;function r(t){this.attr=function(e){return t.getAttributeNS(null,e)},this.tag=t.tagName,this.class=this.attr("class"),this.id=this.attr("id"),this.isNode=function(){return!!~this.class.indexOf(i.settings("classPrefix")+"-node")},this.isEdge=function(){return!!~this.class.indexOf(i.settings("classPrefix")+"-edge")},this.isHover=function(){return!!~this.class.indexOf(i.settings("classPrefix")+"-hover")}}function t(e){var t;i.settings("eventsEnabled")&&(i.dispatchEvent("click",e),(t=new r(e.target)).isNode()?i.dispatchEvent("clickNode",{node:s.nodes(t.attr("data-node-id"))}):i.dispatchEvent("clickStage"),e.preventDefault(),e.stopPropagation())}function o(e){var t;i.settings("eventsEnabled")&&(i.dispatchEvent("doubleClick",e),(t=new r(e.target)).isNode()?i.dispatchEvent("doubleClickNode",{node:s.nodes(t.attr("data-node-id"))}):i.dispatchEvent("doubleClickStage"),e.preventDefault(),e.stopPropagation())}e.addEventListener("click",t,!1),sigma.utils.doubleClick(e,"click",o),e.addEventListener("touchstart",t,!1),sigma.utils.doubleClick(e,"touchstart",o),e.addEventListener("mouseover",function(e){e=e.toElement||e.target,i.settings("eventsEnabled")&&e&&((e=new r(e)).isNode()?i.dispatchEvent("overNode",{node:s.nodes(e.attr("data-node-id"))}):e.isEdge()&&(e=s.edges(e.attr("data-edge-id")),i.dispatchEvent("overEdge",{edge:e,source:s.nodes(e.source),target:s.nodes(e.target)})))},!0),e.addEventListener("mouseout",function(e){e=e.fromElement||e.originalTarget,i.settings("eventsEnabled")&&((e=new r(e)).isNode()?i.dispatchEvent("outNode",{node:s.nodes(e.attr("data-node-id"))}):e.isEdge()&&(e=s.edges(e.attr("data-edge-id")),i.dispatchEvent("outEdge",{edge:e,source:s.nodes(e.source),target:s.nodes(e.target)})))},!0)}}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.misc"),sigma.misc.drawHovers=function(g){var c=this,u={},m={};function t(){var e,t,i,s,r=c.contexts.hover.canvas,o=c.settings("defaultNodeType"),a=c.settings("defaultEdgeType"),n=sigma.canvas.hovers,l=sigma.canvas.edgehovers,d=sigma.canvas.extremities,h=c.settings.embedObjects({prefix:g});if(c.contexts.hover.clearRect(0,0,r.width,r.height),h("enableHovering")&&h("singleHover")&&Object.keys(u).length&&(n[(r=u[Object.keys(u)[0]]).type]||n[o]||n.def)(r,c.contexts.hover,h),h("enableHovering")&&!h("singleHover"))for(e in u)(n[u[e].type]||n[o]||n.def)(u[e],c.contexts.hover,h);if(h("enableEdgeHovering")&&h("singleHover")&&Object.keys(m).length&&(s=m[Object.keys(m)[0]],t=c.graph.nodes(s.source),i=c.graph.nodes(s.target),s.hidden||((l[s.type]||l[a]||l.def)(s,t,i,c.contexts.hover,h),h("edgeHoverExtremities")?(d[s.type]||d.def)(s,t,i,c.contexts.hover,h):((sigma.canvas.nodes[t.type]||sigma.canvas.nodes.def)(t,c.contexts.hover,h),(sigma.canvas.nodes[i.type]||sigma.canvas.nodes.def)(i,c.contexts.hover,h)))),h("enableEdgeHovering")&&!h("singleHover"))for(e in m)s=m[e],t=c.graph.nodes(s.source),i=c.graph.nodes(s.target),s.hidden||((l[s.type]||l[a]||l.def)(s,t,i,c.contexts.hover,h),h("edgeHoverExtremities")?(d[s.type]||d.def)(s,t,i,c.contexts.hover,h):((sigma.canvas.nodes[t.type]||sigma.canvas.nodes.def)(t,c.contexts.hover,h),(sigma.canvas.nodes[i.type]||sigma.canvas.nodes.def)(i,c.contexts.hover,h)))}this.bind("overNode",function(e){e=e.data.node;e.hidden||(u[e.id]=e,t())}),this.bind("outNode",function(e){delete u[e.data.node.id],t()}),this.bind("overEdge",function(e){e=e.data.edge;e.hidden||(m[e.id]=e,t())}),this.bind("outEdge",function(e){delete m[e.data.edge.id],t()}),this.bind("render",function(e){t()})}}.call(this);