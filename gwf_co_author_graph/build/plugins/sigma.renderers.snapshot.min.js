!function(e){if("undefined"==typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var l=["scene","edges","nodes","labels"],m={png:"image/png",jpg:"image/jpeg",gif:"image/gif",tiff:"image/tiff"};function t(n){if((n=n||{}).format&&!(n.format in m))throw Error('sigma.renderers.snaphot: unsupported format "'+n.format+'".');var a=this,i=this instanceof sigma.renderers.webgl,o=[],r=document.createElement("canvas"),s=r.getContext("2d"),d=!1;l.forEach(function(e){var t;a.contexts[e]&&(!1===n.labels&&"labels"===e||(t=a.domElements[e]||a.domElements.scene,e=a.contexts[e],~o.indexOf(e)||(d||(r.width=i&&e instanceof WebGLRenderingContext?t.width/2:t.width,r.height=i&&e instanceof WebGLRenderingContext?t.height/2:t.height,d=!0,n.background&&(s.rect(0,0,r.width,r.height),s.fillStyle=n.background,s.fill())),e instanceof WebGLRenderingContext?s.drawImage(t,0,0,t.width/2,t.height/2):s.drawImage(t,0,0),o.push(e))))});var e,t,g,f,h=r.toDataURL(m[n.format||"png"]);return n.download&&(e=h,t=n.format||"png",g=n.filename,(f=document.createElement("a")).setAttribute("href",e),f.setAttribute("download",g||"graph."+t),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),f.dispatchEvent(t),delete f),delete s,delete r,delete o,h}sigma.renderers.canvas.prototype.snapshot=t,sigma.renderers.webgl.prototype.snapshot=t}.call(this);