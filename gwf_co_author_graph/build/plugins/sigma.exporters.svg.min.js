!function(e){"use strict";if("undefined"==typeof sigma)throw"sigma.renderers.snapshot: sigma not in scope.";var r=this.URL||this.webkitURL||this;function n(e,t){var s=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),e={};e.anchor=document.createElement("a"),e.anchor.setAttribute("href",r.createObjectURL(s)),e.anchor.setAttribute("download",t);t=document.createEvent("MouseEvent");t.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.revokeObjectURL(s),e.anchor.dispatchEvent(t),delete e.anchor}var c="1000",d="graph.svg";sigma.prototype.toSVG=function(e){e=e||{};var t=this.settings("classPrefix"),s=e.size||e.width||c,r=e.size||e.height||c;(l=document.createElement("div")).setAttribute("width",s),l.setAttribute("height",r),l.setAttribute("style","position:absolute; top: 0px; left:0px; width: "+s+"px; height: "+r+"px;");var i=this.addCamera(),a=this.addRenderer({camera:i,container:l,type:"svg",forceLabels:!!e.labels});a.resize(s,r),this.refresh(),this.killRenderer(a),this.killCamera(i);i=l.querySelector("svg");i.removeAttribute("style"),i.setAttribute("width",s+"px"),i.setAttribute("height",r+"px"),i.setAttribute("x","0px"),i.setAttribute("y","0px"),e.labels||(o=i.querySelector('[id="'+t+'-group-labels"]'),i.removeChild(o));var o=i.querySelector('[id="'+t+'-group-hovers"]');i.removeChild(o),e.classes=!1!==e.classes,e.data&&!e.classes||function(e,t,s){var r,i,a={},o={},l=0,n="";s.classes&&((i=document.createElementNS("http://www.w3.org/2000/svg","style")).setAttribute("type","text/css"),e.insertBefore(i,e.firstChild));for(var c=e.querySelectorAll('[id="'+t+'-group-nodes"] > [class="'+t+'-node"]'),d=0,u=c.length,h=!0;d<u;d++)r=c[d].getAttribute("fill"),s.data||c[d].removeAttribute("data-node-id"),s.classes&&(r in a||(a[r]=h?t+"-node":"c-"+l++,n+="."+a[r]+"{fill: "+r+"}"),a[r]!==t+"-node"&&c[d].setAttribute("class",c[d].getAttribute("class")+" "+a[r]),c[d].removeAttribute("fill")),h=!1;var g=e.querySelectorAll('[id="'+t+'-group-edges"] > [class="'+t+'-edge"]');for(u=g.length,h=!(d=0);d<u;d++)r=g[d].getAttribute("stroke"),s.data||g[d].removeAttribute("data-edge-id"),s.classes&&(r in o||(o[r]=h?t+"-edge":"c-"+l++,n+="."+o[r]+"{stroke: "+r+"}"),o[r]!==t+"-edge"&&g[d].setAttribute("class",g[d].getAttribute("class")+" "+o[r]),g[d].removeAttribute("stroke")),h=!1;s.classes&&i.appendChild(document.createTextNode(n))}(i,t,e);var l=null,l='<?xml version="1.0" encoding="utf-8"?>\n';return l+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n',l+=i.outerHTML,e.download&&n(l,e.filename||d),l}}.call(this);