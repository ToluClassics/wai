!function(n){"use strict";var c={getModelTags:function(e){for(var t=e.getElementsByTagName("attributes"),i={},r=t.length,n=0;n<r;n++)i[t[n].getAttribute("class")]=t[n].childNodes;return i},nodeListToArray:function(e){for(var t=[],i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t.push(e[i]);return t},nodeListEach:function(e,t){for(var i=0,r=e.length;i<r;++i)"#text"!==e[i].nodeName&&t(e[i])},nodeListToHash:function(e,t){for(var i,r={},n=0;n<e.length;n++)"#text"!==e[n].nodeName&&(r[(i=t(e[n])).key]=i.value);return r},namedNodeMapToObject:function(e){for(var t={},i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},getFirstElementByTagNS:function(e,t,i){var r=e.getElementsByTagName(t+":"+i)[0];return r=(r=r||e.getElementsByTagNameNS(t,i)[0])||e.getElementsByTagName(i)[0]},getAttributeNS:function(e,t,i){var r=e.getAttribute(t+":"+i);return r=(r=r===n?e.getAttributeNS(t,i):r)===n?e.getAttribute(i):r},enforceType:function(e,t){switch(e){case"boolean":t="true"===t;break;case"integer":case"long":case"float":case"double":t=+t;break;case"liststring":t=t?t.split("|"):[]}return t},getRGB:function(e){return e[3]?"rgba("+e.join(",")+")":"rgb("+e.slice(0,-1).join(",")+")"}};function i(e){var r={};r.els={root:e.getElementsByTagName("gexf")[0],graph:e.getElementsByTagName("graph")[0],meta:e.getElementsByTagName("meta")[0],nodes:e.getElementsByTagName("node"),edges:e.getElementsByTagName("edge"),model:c.getModelTags(e)},r.hasViz=!!c.getAttributeNS(r.els.root,"xmlns","viz"),r.version=r.els.root.getAttribute("version")||"1.0",r.mode=r.els.graph.getAttribute("mode")||"static";var t=r.els.graph.getAttribute("defaultedgetype");function i(e){var i=[];return r.els.model[e]&&c.nodeListEach(r.els.model[e],function(e){var t={id:e.getAttribute("id")||e.getAttribute("for"),type:e.getAttribute("type")||"string",title:e.getAttribute("title")||""},e=c.nodeListToArray(e.childNodes);0<e.length&&(t.defaultValue=e[0].textContent),i.push(t)}),0<i.length&&i}function n(e,t){var i={},t=t.getElementsByTagName("attvalue"),r=c.nodeListToHash(t,function(e){e=c.namedNodeMapToObject(e.attributes);return{key:e.id||e.for,value:e.value}});return e.map(function(e){i[e.id]=!(e.id in r)&&"defaultValue"in e?c.enforceType(e.type,e.defaultValue):c.enforceType(e.type,r[e.id])}),i}r.defaultEdgetype=t||"undirected";var o,a,s,u,g,l,d=i("node"),e=i("edge"),t={version:r.version,mode:r.mode,defaultEdgeType:r.defaultEdgetype,meta:(l={},r.els.meta&&(l.lastmodifieddate=r.els.meta.getAttribute("lastmodifieddate"),c.nodeListEach(r.els.meta.childNodes,function(e){l[e.tagName.toLowerCase()]=e.textContent})),l),model:{},nodes:(u=d,g=[],c.nodeListEach(r.els.nodes,function(e){var t={id:e.getAttribute("id"),label:e.getAttribute("label")||""};u&&(t.attributes=n(u,e)),r.hasViz&&(t.viz=function(e){var t={},i=c.getFirstElementByTagNS(e,"viz","color");i&&(n=["r","g","b","a"].map(function(e){return i.getAttribute(e)}),t.color=c.getRGB(n));var r=c.getFirstElementByTagNS(e,"viz","position");r&&(t.position={},["x","y","z"].map(function(e){t.position[e]=+r.getAttribute(e)}));var n=c.getFirstElementByTagNS(e,"viz","size");n&&(t.size=+n.getAttribute("value"));e=c.getFirstElementByTagNS(e,"viz","shape");e&&(t.shape=e.getAttribute("value"));return t}(e)),g.push((t={id:(e=t).id,label:e.label},e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t))}),g),edges:(o=e,a=r.defaultEdgetype,s=[],c.nodeListEach(r.els.edges,function(e){var t=c.namedNodeMapToObject(e.attributes);"type"in t||(t.type=a),o&&(t.attributes=n(o,e)),r.hasViz&&(t.viz=function(e){var t={},i=c.getFirstElementByTagNS(e,"viz","color");i&&(r=["r","g","b","a"].map(function(e){return i.getAttribute(e)}),t.color=c.getRGB(r));var r=c.getFirstElementByTagNS(e,"viz","shape");r&&(t.shape=r.getAttribute("value"));e=c.getFirstElementByTagNS(e,"viz","thickness");e&&(t.thickness=+e.getAttribute("value"));return t}(e)),s.push((t={id:(e=t).id,type:e.type||"undirected",label:e.label||"",source:e.source,target:e.target,weight:+e.weight||1},e.viz&&(t.viz=e.viz),e.attributes&&(t.attributes=e.attributes),t))}),s)};return d&&(t.model.node=d),e&&(t.model.edge=e),t}function r(e,t){var i=function(){if(window.XMLHttpRequest)return new XMLHttpRequest;var e,t;if(window.ActiveXObject)for(t in e=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"])try{return new ActiveXObject(e[t])}catch(e){}return null}();if(!i)throw"XMLHttpRequest not supported, cannot load the file.";var r="function"==typeof t,n=i.overrideMimeType?(i.overrideMimeType("text/xml"),function(e){return e.responseXML}):function(e){return(new DOMParser).parseFromString(e.responseText,"application/xml")};return i.open("GET",e,r),r&&(i.onreadystatechange=function(){4===i.readyState&&t(n(i))}),i.send(),r?i:n(i)}if(void 0!==this.gexf)throw'gexf: error - a variable called "gexf" already exists in the global scope';this.gexf={parse:i,fetch:function(e,t){return"function"==typeof t?r(e,function(e){t(i(e))}):i(r(e))},version:"0.1.1"},"undefined"!=typeof exports&&this.exports!==exports&&(module.exports=this.gexf)}.call(this),function(e){"use strict";if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.parsers");var u=0;sigma.parsers.gexf=function(e,t,i){var r,n,o,a;function s(e){for(o=e.nodes,r=0,n=o.length;r<n;r++)(a=o[r]).id=a.id,a.viz&&"object"==typeof a.viz&&(a.viz.position&&"object"==typeof a.viz.position&&(a.x=a.viz.position.x,a.y=-a.viz.position.y),a.size=a.viz.size,a.color=a.viz.color);for(o=e.edges,r=0,n=o.length;r<n;r++)(a=o[r]).id="string"==typeof a.id?a.id:"e"+u++,a.source=""+a.source,a.target=""+a.target,a.viz&&"object"==typeof a.viz&&(a.color=a.viz.color,a.size=a.viz.thickness),a.size=a.weight,a.direction=a.type,delete a.type;if(t instanceof sigma){for(t.graph.clear(),o=e.nodes,r=0,n=o.length;r<n;r++)t.graph.addNode(o[r]);for(o=e.edges,r=0,n=o.length;r<n;r++)t.graph.addEdge(o[r])}else"object"==typeof t?(t.graph=e,t=new sigma(t)):"function"==typeof t&&(i=t,t=null);if(!i)return e;i(t||e)}if("string"==typeof e)gexf.fetch(e,s);else if("object"==typeof e)return s(gexf.parse(e))}}.call(this);